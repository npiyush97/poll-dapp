var tn=Object.defineProperty;var re=Object.getOwnPropertySymbols;var en=Object.prototype.hasOwnProperty,nn=Object.prototype.propertyIsEnumerable;var ie=(e,t,a)=>t in e?tn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,kt=(e,t)=>{for(var a in t||(t={}))en.call(t,a)&&ie(e,a,t[a]);if(re)for(var a of re(t))nn.call(t,a)&&ie(e,a,t[a]);return e};function Q(){}const oe=e=>e;function Ht(e,t){for(const a in t)e[a]=t[a];return e}function ae(e){return e()}function ue(){return Object.create(null)}function mt(e){e.forEach(ae)}function Et(e){return typeof e=="function"}function lt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function rn(e){return Object.keys(e).length===0}function Ut(e,...t){if(e==null)return Q;const a=e.subscribe(...t);return a.unsubscribe?()=>a.unsubscribe():a}function on(e){let t;return Ut(e,a=>t=a)(),t}function F(e,t,a){e.$$.on_destroy.push(Ut(t,a))}function Yt(e,t,a,u){if(e){const n=se(e,t,a,u);return e[0](n)}}function se(e,t,a,u){return e[1]&&u?Ht(a.ctx.slice(),e[1](u(t))):a.ctx}function an(e,t,a,u){if(e[2]&&u){const n=e[2](u(a));if(t.dirty===void 0)return n;if(typeof n=="object"){const i=[],r=Math.max(t.dirty.length,n.length);for(let o=0;o<r;o+=1)i[o]=t.dirty[o]|n[o];return i}return t.dirty|n}return t.dirty}function Jt(e,t,a,u,n,i,r){const o=an(t,u,n,i);if(o){const f=se(t,a,u,r);e.p(f,o)}}function Nr(e){const t={};for(const a in e)a[0]!=="$"&&(t[a]=e[a]);return t}function Pr(e,t,a=t){return e.set(a),t}function un(e){return e&&Et(e.destroy)?e.destroy:Q}const fe=typeof window!="undefined";let le=fe?()=>window.performance.now():()=>Date.now(),Wt=fe?e=>requestAnimationFrame(e):Q;const St=new Set;function ce(e){St.forEach(t=>{t.c(e)||(St.delete(t),t.f())}),St.size!==0&&Wt(ce)}function he(e){let t;return St.size===0&&Wt(ce),{promise:new Promise(a=>{St.add(t={c:e,f:a})}),abort(){St.delete(t)}}}let $t=!1;function sn(){$t=!0}function fn(){$t=!1}function ln(e,t,a,u){for(;e<t;){const n=e+(t-e>>1);a(n)<=u?e=n+1:t=n}return e}function cn(e){if(e.hydrate_init)return;e.hydrate_init=!0;const t=e.childNodes,a=new Int32Array(t.length+1),u=new Int32Array(t.length);a[0]=-1;let n=0;for(let f=0;f<t.length;f++){const s=t[f].claim_order,c=ln(1,n+1,p=>t[a[p]].claim_order,s)-1;u[f]=a[c]+1;const l=c+1;a[l]=f,n=Math.max(l,n)}const i=[],r=[];let o=t.length-1;for(let f=a[n]+1;f!=0;f=u[f-1]){for(i.push(t[f-1]);o>=f;o--)r.push(t[o]);o--}for(;o>=0;o--)r.push(t[o]);i.reverse(),r.sort((f,s)=>f.claim_order-s.claim_order);for(let f=0,s=0;f<r.length;f++){for(;s<i.length&&r[f].claim_order>=i[s].claim_order;)s++;const c=s<i.length?i[s]:null;e.insertBefore(r[f],c)}}function Y(e,t){$t?(cn(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function Z(e,t,a){$t&&!a?Y(e,t):(t.parentNode!==e||t.nextSibling!=a)&&e.insertBefore(t,a||null)}function z(e){e.parentNode.removeChild(e)}function Ft(e,t){for(let a=0;a<e.length;a+=1)e[a]&&e[a].d(t)}function J(e){return document.createElement(e)}function Ir(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function yt(e){return document.createTextNode(e)}function rt(){return yt(" ")}function de(){return yt("")}function gt(e,t,a,u){return e.addEventListener(t,a,u),()=>e.removeEventListener(t,a,u)}function hn(e){return function(t){return t.preventDefault(),e.call(this,t)}}function dn(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function R(e,t,a){a==null?e.removeAttribute(t):e.getAttribute(t)!==a&&e.setAttribute(t,a)}function pn(e){return Array.from(e.childNodes)}function wt(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Gr(e,t){e.value=t==null?"":t}function Mt(e,t,a,u){e.style.setProperty(t,a,u?"important":"")}function H(e,t,a){e.classList[a?"add":"remove"](t)}function pe(e,t,a=!1){const u=document.createEvent("CustomEvent");return u.initCustomEvent(e,a,!1,t),u}const Lt=new Set;let Bt=0;function yn(e){let t=5381,a=e.length;for(;a--;)t=(t<<5)-t^e.charCodeAt(a);return t>>>0}function gn(e,t,a,u,n,i,r,o=0){const f=16.666/u;let s=`{
`;for(let b=0;b<=1;b+=f){const T=t+(a-t)*i(b);s+=b*100+`%{${r(T,1-T)}}
`}const c=s+`100% {${r(a,1-a)}}
}`,l=`__svelte_${yn(c)}_${o}`,p=e.ownerDocument;Lt.add(p);const y=p.__svelte_stylesheet||(p.__svelte_stylesheet=p.head.appendChild(J("style")).sheet),m=p.__svelte_rules||(p.__svelte_rules={});m[l]||(m[l]=!0,y.insertRule(`@keyframes ${l} ${c}`,y.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${l} ${u}ms linear ${n}ms 1 both`,Bt+=1,l}function ye(e,t){const a=(e.style.animation||"").split(", "),u=a.filter(t?i=>i.indexOf(t)<0:i=>i.indexOf("__svelte")===-1),n=a.length-u.length;n&&(e.style.animation=u.join(", "),Bt-=n,Bt||mn())}function mn(){Wt(()=>{Bt||(Lt.forEach(e=>{const t=e.__svelte_stylesheet;let a=t.cssRules.length;for(;a--;)t.deleteRule(a);e.__svelte_rules={}}),Lt.clear())})}let Nt;function Pt(e){Nt=e}function It(){if(!Nt)throw new Error("Function called outside component initialization");return Nt}function ge(e){It().$$.on_mount.push(e)}function Ot(){const e=It();return(t,a)=>{const u=e.$$.callbacks[t];if(u){const n=pe(t,a);u.slice().forEach(i=>{i.call(e,n)})}}}function Vt(e,t){It().$$.context.set(e,t)}function et(e){return It().$$.context.get(e)}function zt(e,t){const a=e.$$.callbacks[t.type];a&&a.slice().forEach(u=>u.call(this,t))}const jt=[],_t=[],Gt=[],qt=[],me=Promise.resolve();let Zt=!1;function ve(){Zt||(Zt=!0,me.then(we))}function vn(){return ve(),me}function Dt(e){Gt.push(e)}function Kr(e){qt.push(e)}let Xt=!1;const Qt=new Set;function we(){if(!Xt){Xt=!0;do{for(let e=0;e<jt.length;e+=1){const t=jt[e];Pt(t),wn(t.$$)}for(Pt(null),jt.length=0;_t.length;)_t.pop()();for(let e=0;e<Gt.length;e+=1){const t=Gt[e];Qt.has(t)||(Qt.add(t),t())}Gt.length=0}while(jt.length);for(;qt.length;)qt.pop()();Zt=!1,Xt=!1,Qt.clear()}}function wn(e){if(e.fragment!==null){e.update(),mt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Dt)}}let Ct;function _n(){return Ct||(Ct=Promise.resolve(),Ct.then(()=>{Ct=null})),Ct}function _e(e,t,a){e.dispatchEvent(pe(`${t?"intro":"outro"}${a}`))}const Kt=new Set;let bt;function be(){bt={r:0,c:[],p:bt}}function ke(){bt.r||mt(bt.c),bt=bt.p}function X(e,t){e&&e.i&&(Kt.delete(e),e.i(t))}function tt(e,t,a,u){if(e&&e.o){if(Kt.has(e))return;Kt.add(e),bt.c.push(()=>{Kt.delete(e),u&&(a&&e.d(1),u())}),e.o(t)}}const bn={duration:0};function kn(e,t,a){let u=t(e,a),n=!1,i,r,o=0;function f(){i&&ye(e,i)}function s(){const{delay:l=0,duration:p=300,easing:y=oe,tick:m=Q,css:h}=u||bn;h&&(i=gn(e,0,1,p,l,y,h,o++)),m(0,1);const b=le()+l,T=b+p;r&&r.abort(),n=!0,Dt(()=>_e(e,!0,"start")),r=he(v=>{if(n){if(v>=T)return m(1,0),_e(e,!0,"end"),f(),n=!1;if(v>=b){const d=y((v-b)/p);m(d,1-d)}}return n})}let c=!1;return{start(){c||(ye(e),Et(u)?(u=u(),_n().then(s)):s())},invalidate(){c=!1},end(){n&&(f(),n=!1)}}}const Sn=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function Dn(e,t){tt(e,1,1,()=>{t.delete(e.key)})}function xn(e,t,a,u,n,i,r,o,f,s,c,l){let p=e.length,y=i.length,m=p;const h={};for(;m--;)h[e[m].key]=m;const b=[],T=new Map,v=new Map;for(m=y;m--;){const A=l(n,i,m),j=a(A);let C=r.get(j);C?u&&C.p(A,t):(C=s(j,A),C.c()),T.set(j,b[m]=C),j in h&&v.set(j,Math.abs(m-h[j]))}const d=new Set,g=new Set;function S(A){X(A,1),A.m(o,c),r.set(A.key,A),c=A.first,y--}for(;p&&y;){const A=b[y-1],j=e[p-1],C=A.key,E=j.key;A===j?(c=A.first,p--,y--):T.has(E)?!r.has(C)||d.has(C)?S(A):g.has(E)?p--:v.get(C)>v.get(E)?(g.add(C),S(A)):(d.add(E),p--):(f(j,r),p--)}for(;p--;){const A=e[p];T.has(A.key)||f(A,r)}for(;y;)S(b[y-1]);return b}function Rr(e,t,a){const u=e.$$.props[t];u!==void 0&&(e.$$.bound[u]=a,a(e.$$.ctx[u]))}function at(e){e&&e.c()}function it(e,t,a,u){const{fragment:n,on_mount:i,on_destroy:r,after_update:o}=e.$$;n&&n.m(t,a),u||Dt(()=>{const f=i.map(ae).filter(Et);r?r.push(...f):mt(f),e.$$.on_mount=[]}),o.forEach(Dt)}function ot(e,t){const a=e.$$;a.fragment!==null&&(mt(a.on_destroy),a.fragment&&a.fragment.d(t),a.on_destroy=a.fragment=null,a.ctx=[])}function Tn(e,t){e.$$.dirty[0]===-1&&(jt.push(e),ve(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function dt(e,t,a,u,n,i,r=[-1]){const o=Nt;Pt(e);const f=e.$$={fragment:null,ctx:null,props:i,update:Q,not_equal:n,bound:ue(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o?o.$$.context:t.context||[]),callbacks:ue(),dirty:r,skip_bound:!1};let s=!1;if(f.ctx=a?a(e,t.props||{},(c,l,...p)=>{const y=p.length?p[0]:l;return f.ctx&&n(f.ctx[c],f.ctx[c]=y)&&(!f.skip_bound&&f.bound[c]&&f.bound[c](y),s&&Tn(e,c)),l}):[],f.update(),s=!0,mt(f.before_update),f.fragment=u?u(f.ctx):!1,t.target){if(t.hydrate){sn();const c=pn(t.target);f.fragment&&f.fragment.l(c),c.forEach(z)}else f.fragment&&f.fragment.c();t.intro&&X(e.$$.fragment),it(e,t.target,t.anchor,t.customElement),fn(),we()}Pt(o)}class pt{$destroy(){ot(this,1),this.$destroy=Q}$on(t,a){const u=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return u.push(a),()=>{const n=u.indexOf(a);n!==-1&&u.splice(n,1)}}$set(t){this.$$set&&!rn(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const xt=[];function An(e,t){return{subscribe:ut(e,t).subscribe}}function ut(e,t=Q){let a;const u=[];function n(o){if(lt(e,o)&&(e=o,a)){const f=!xt.length;for(let s=0;s<u.length;s+=1){const c=u[s];c[1](),xt.push(c,e)}if(f){for(let s=0;s<xt.length;s+=2)xt[s][0](xt[s+1]);xt.length=0}}}function i(o){n(o(e))}function r(o,f=Q){const s=[o,f];return u.push(s),u.length===1&&(a=t(n)||Q),o(e),()=>{const c=u.indexOf(s);c!==-1&&u.splice(c,1),u.length===0&&(a(),a=null)}}return{set:n,update:i,subscribe:r}}function te(e,t,a){const u=!Array.isArray(e),n=u?[e]:e,i=t.length<2;return An(a,r=>{let o=!1;const f=[];let s=0,c=Q;const l=()=>{if(s)return;c();const y=t(u?f[0]:f,r);i?r(y):c=Et(y)?y:Q},p=n.map((y,m)=>Ut(y,h=>{f[m]=h,s&=~(1<<m),o&&l()},()=>{s|=1<<m}));return o=!0,l(),function(){mt(p),c()}})}function On(e){const t=e-1;return t*t*t+1}function Hr(e){return-.5*(Math.cos(Math.PI*e)-1)}function Se(e){return Object.prototype.toString.call(e)==="[object Date]"}function ee(e,t){if(e===t||e!==e)return()=>e;const a=typeof e;if(a!==typeof t||Array.isArray(e)!==Array.isArray(t))throw new Error("Cannot interpolate values of different type");if(Array.isArray(e)){const u=t.map((n,i)=>ee(e[i],n));return n=>u.map(i=>i(n))}if(a==="object"){if(!e||!t)throw new Error("Object cannot be null");if(Se(e)&&Se(t)){e=e.getTime(),t=t.getTime();const i=t-e;return r=>new Date(e+r*i)}const u=Object.keys(t),n={};return u.forEach(i=>{n[i]=ee(e[i],t[i])}),i=>{const r={};return u.forEach(o=>{r[o]=n[o](i)}),r}}if(a==="number"){const u=t-e;return n=>e+n*u}throw new Error(`Cannot interpolate ${a} values`)}function Ur(e,t={}){const a=ut(e);let u,n=e;function i(r,o){if(e==null)return a.set(e=r),Promise.resolve();n=r;let f=u,s=!1,{delay:c=0,duration:l=400,easing:p=oe,interpolate:y=ee}=Ht(Ht({},t),o);if(l===0)return f&&(f.abort(),f=null),a.set(e=n),Promise.resolve();const m=le()+c;let h;return u=he(b=>{if(b<m)return!0;s||(h=y(e,r),typeof l=="function"&&(l=l(e,r)),s=!0),f&&(f.abort(),f=null);const T=b-m;return T>l?(a.set(e=r),!1):(a.set(e=h(p(T/l))),!0)}),u.promise}return{set:i,update:(r,o)=>i(r(n,e),o),subscribe:a.subscribe}}var vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function De(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xe={exports:{}};(function(e){(function(){function t(u,n){return n?De(u):u.slice?t[i(u)]:function(r,o){u(r={exports:{}}),t[i(o)]=r.exports};function i(r){return r.split("/").slice(-1).toString().replace(".js","")}}var a=e;t(function(u){String.random=function(i,r){var o="";for(i=i||24,r=r||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";i-- >0;)o+=r.charAt(Math.floor(Math.random()*r.length));return o},String.match=function(i,r){var o,f;return typeof i!="string"?!1:(typeof r=="string"&&(r={"=":r}),r=r||{},o=r["="]||r["*"]||r[">"]||r["<"],i===o?!0:f!==r["="]?!1:(o=r["*"]||r[">"],i.slice(0,(o||"").length)===o?!0:f!==r["*"]?!1:f!==r[">"]&&f!==r["<"]?i>=r[">"]&&i<=r["<"]:f!==r[">"]&&i>=r[">"]||f!==r["<"]&&i<=r["<"]))},String.hash=function(i,r){if(typeof i=="string"){if(r=r||0,!i.length)return r;for(var o=0,f=i.length,s;o<f;++o)s=i.charCodeAt(o),r=(r<<5)-r+s,r|=0;return r}};var n=Object.prototype.hasOwnProperty;Object.plain=function(i){return i?i instanceof Object&&i.constructor===Object||Object.prototype.toString.call(i).match(/^\[object (\w+)\]$/)[1]==="Object":!1},Object.empty=function(i,r){for(var o in i)if(n.call(i,o)&&(!r||r.indexOf(o)==-1))return!1;return!0},Object.keys=Object.keys||function(i){var r=[];for(var o in i)n.call(i,o)&&r.push(o);return r},function(){var i,r=setTimeout,o=0,f=0,s=typeof setImmediate!=""+i&&setImmediate||r;r.poll=r.poll||function(c){if(1>=+new Date-o&&f++<3333){c();return}s(function(){o=+new Date,c()},f=0)}}(),function(){var i=setTimeout,r=i.turn=i.turn||function(p){o.push(p)==1&&f(l)},o=r.s=[],f=i.poll,s=0,c,l=function(){(c=o[s++])&&c(),(s==o.length||s==99)&&(o=r.s=o.slice(s),s=0),o.length&&f(l)}}(),function(){var i,r=setTimeout,o=r.turn;(r.each=r.each||function(f,s,c,l){l=l||9,function p(y,m,h){if(m=(y=(f||[]).splice(0,l)).length){for(var b=0;b<m&&i===(h=s(y[b]));b++);if(i===h){o(p);return}}c&&c(h)}()})()}()})(t,"./shim"),t(function(u){u.exports=function n(i,r,o){if(!i)return{to:n};var f,s=typeof r=="function",i=(this.tag||(this.tag={}))[i]||s&&(this.tag[i]={tag:i,to:n._={next:function(l){var p;(p=this.to)&&p.next(l)}}});if(s){var c={off:n.off||(n.off=function(){if(this.next===n._.next)return!0;this===this.the.last&&(this.the.last=this.back),this.to.back=this.back,this.next=n._.next,this.back.to=this.to,this.the.last===this.the&&delete this.on.tag[this.the.tag]}),to:n._,next:r,the:i,on:this,as:o};return(c.back=i.last||i).to=c,i.last=c}return(i=i.to)&&f!==r&&i.next(r),i}})(t,"./onto"),t(function(u){t("./shim"),u.exports=function(n){return n===void 0?!1:n===null?!0:n===1/0||n!==n?!1:typeof n=="string"||typeof n=="boolean"||typeof n=="number"?!0:n&&typeof(n["#"]||0)=="string"&&Object.empty(n,["#"])?n["#"]:!1}})(t,"./valid"),t(function(u){t("./shim");function n(){var c=+new Date;return f<c?(r=0,f=c+n.drift):f=c+(r+=1)/o+n.drift}n.drift=0;var i=-1/0,r=0,o=999,f=i,s;n.is=function(c,l,p){var y=l&&c&&c._&&c._[">"]||p;if(!!y)return typeof(y=y[l])=="number"?y:i},n.ify=function(c,l,p,y,m){(c=c||{})._=c._||{},m&&(c._["#"]=m);var h=c._[">"]||(c._[">"]={});return s!==l&&l!=="_"&&(typeof p=="number"&&(h[l]=p),s!==y&&(c[l]=y)),c},u.exports=n})(t,"./state"),t(function(u){t("./shim");function n(i){var r={s:{}},o=r.s;i=i||{max:999,age:1e3*9},r.check=function(s){return o[s]?f(s):!1};var f=r.track=function(s){var c=o[s]||(o[s]={});return c.was=r.now=+new Date,r.to||(r.to=setTimeout(r.drop,i.age+9)),c};return r.drop=function(s){r.to=null,r.now=+new Date;var c=Object.keys(o);console.STAT&&console.STAT(r.now,+new Date-r.now,"dup drop keys"),setTimeout.each(c,function(l){var p=o[l];p&&(s||i.age)>r.now-p.was||delete o[l]},0,99)},r}u.exports=n})(t,"./dup"),t(function(u){t("./onto"),u.exports=function(r,o){if(!!this.on){var f=(this.opt||{}).lack||9e3;if(typeof r!="function"){if(!r)return;var c=r["#"]||r,s=(this.tag||"")[c];return s?(o&&(s=this.on(c,o),clearTimeout(s.err),s.err=setTimeout(function(){s.off()},f)),!0):void 0}var c=o&&o["#"]||n(9);if(!r)return c;var l=this.on(c,r,o);return l.err=l.err||setTimeout(function(){l.off(),l.next({err:"Error: No ACK yet.",lack:!0})},f),c}};var n=String.random||function(){return Math.random().toString(36).slice(2)}})(t,"./ask"),t(function(u){function n(m){return m instanceof n?(this._={$:this}).$:this instanceof n?n.create(this._={$:this,opt:m}):new n(m)}n.is=function(m){return m instanceof n||m&&m._&&m===m._.$||!1},n.version=.202,n.chain=n.prototype,n.chain.toJSON=function(){},t("./shim"),n.valid=t("./valid"),n.state=t("./state"),n.on=t("./onto"),n.dup=t("./dup"),n.ask=t("./ask"),function(){n.create=function(D){D.root=D.root||D,D.graph=D.graph||{},D.on=D.on||n.on,D.ask=D.ask||n.ask,D.dup=D.dup||n.dup();var B=D.$.opt(D.opt);return D.once||(D.on("in",m,D),D.on("out",m,D),D.on("put",T,D),n.on("create",D),D.on("create",D)),D.once=1,B};function m(D){if(!!D){if(D.out===m){this.to.next(D);return}var B=this,k=B.as,w=k.at||k,_=w.$,x=w.dup,$,O=D.DBG;if(($=D["#"])||($=D["#"]=r(9)),!x.check($)){if(x.track($),$=D._,D._=typeof $=="function"?$:function(){},D.$&&D.$===(D.$._||"").$||(D.$=_),D["@"]&&!D.put&&d(D),!w.ask(D["@"],D))if(O&&(O.u=+new Date),D.put){h(D);return}else D.get&&n.on.get(D,_);O&&(O.uc=+new Date),B.to.next(D),O&&(O.ua=+new Date),!(D.nts||D.NTS)&&(D.out=m,w.on("out",D),O&&(O.ue=+new Date))}}}function h(D){if(!!D){var B=D._||"",k=B.root=((B.$=D.$||"")._||"").root;if(D["@"]&&B.faith&&!B.miss){D.out=m,k.on("out",D);return}B.latch=k.hatch,B.match=k.hatch=[];var w=D.put,_=B.DBG=D.DBG,x=+new Date;if(!(w["#"]&&w["."])){_&&(_.p=x),B["#"]=D["#"],B.msg=D,B.all=0,B.stun=1;var $=Object.keys(w);console.STAT&&console.STAT(x,((_||B).pk=+new Date)-x,"put sort");var O=0,M,N,P,I,K,U,V;(function L(ft){if(M!=O){if(M=O,!(P=$[O])){console.STAT&&console.STAT(x,((_||B).pd=+new Date)-x,"put"),v(B);return}(I=w[P])?(V=I._)?P!==V["#"]?U=S+A(P)+"soul not same.":(K=V[">"])||(U=S+A(P)+"no state."):U=S+A(P)+"no meta.":U=S+A(P)+"no node.",N=Object.keys(I||{})}if(U){D.err=B.err=U,v(B);return}var ht=0,nt;for(ft=ft||0;ft++<9&&(nt=N[ht++]);)if(nt!=="_"){var q=I[nt],st=K[nt];if(l===st){U=S+A(nt)+"on"+A(P)+"no state.";break}if(!f(q)){U=S+A(nt)+"on"+A(P)+"bad "+typeof q+A(q);break}b(q,nt,P,st,D)}if((N=N.slice(ht)).length){o(L);return}++O,N=null,L(ft)})()}}}n.on.put=h;function b(D,B,k,w,_){var x=_._||"",$=x.root,O=$.graph,M,N=O[k]||p,P=s(N,B,1),I=N[B],K=x.DBG;(M=console.STAT)&&(!O[k]||!I)&&(M.has=(M.has||0)+1);var U=E();if(w>U){setTimeout(function(){b(D,B,k,w,_)},(M=w-U)>C?C:M),console.STAT&&console.STAT((K||x).Hf=+new Date,M,"future");return}if(!(w<P&&!x.miss)&&!(!x.faith&&w===P&&(D===I||j(D)<=j(I))&&!x.miss)){x.stun++;var V=_["#"]+x.all++,L={toString:function(){return V},_:x};L.toJSON=L.toString,K&&(K.ph=K.ph||+new Date),$.on("put",{"#":L,"@":_["@"],put:{"#":k,".":B,":":D,">":w},_:x})}}function T(D){var B;(B=(D._||"").DBG)&&(B.pa=+new Date,B.pm=B.pm||+new Date);var k=this,w=k.as,_=w.graph,x=D._,$=D.put,O=$["#"],M=$["."],N=$[":"],P=$[">"];D["#"];var I;(I=x.msg)&&(I=I.put)&&(I=I[O])&&c(I,M,P,N,O),_[O]=c(_[O],M,P,N,O),(I=(w.next||"")[O])&&I.on("in",D),v(x),k.to.next(D)}function v(D,B){var k;if(!D.stop&&!(!D.err&&0<--D.stun)&&(D.stop=1,!!(k=D.root))){var w=D.match;w.end=1,w===k.hatch&&(!(w=D.latch)||w.end?delete k.hatch:k.hatch=w),D.hatch&&D.hatch(),setTimeout.each(D.match,function(_){_&&_()}),!(!(B=D.msg)||D.err||B.err)&&(B.out=m,D.root.on("out",B))}}function d(D){var B=D["@"]||"",k;!(k=B._)||(k.acks=(k.acks||0)+1,(k.err=D.err)&&(D["@"]=k["#"],v(k)),!k.stop&&!k.crack&&(k.crack=k.match&&k.match.push(function(){g(k)})),g(k))}function g(D){!D||!D.root||D.stun||D.acks!==D.all||D.root.on("in",{"@":D["#"],err:D.err,ok:D.err?l:{"":1}})}var S="Error: Invalid graph!",A=function(D){return" '"+(""+D).slice(0,9)+"...' "},j=JSON.stringify,C=2147483647,E=n.state}(),function(){n.on.get=function(h,b){var T=b._,v=h.get,d=v["#"],g=T.graph[d],S=v["."],A=T.next||(T.next={});A[d];var j=h._||{},C=j.DBG=h.DBG;if(C&&(C.g=+new Date),!g)return T.on("get",h);if(S){if(typeof S!="string"||l===g[S])return T.on("get",h);g=c({},S,s(g,S),g[S],d)}g&&m(h,g),T.on("get",h)};function m(h,b){var T=+new Date,v=h._||{},d=v.DBG=h.DBG,g=h["#"],S=r(9),A=Object.keys(b||"").sort(),j=((b||"")._||"")["#"];A.length;var C=h.$._.root,E=b===C.graph[j];console.STAT&&console.STAT(T,((d||v).gk=+new Date)-T,"got keys"),b&&function D(){T=+new Date;for(var B=0,k,w={},_;B<9&&(k=A[B++]);)c(w,k,s(b,k),b[k],j);A=A.slice(B),(_={})[j]=w,w=_;var x;E&&(x=function(){},x.ram=x.faith=!0),_=A.length,console.STAT&&console.STAT(T,-(T-(T=+new Date)),"got copied some"),d&&(d.ga=+new Date),C.on("in",{"@":g,"#":S,put:w,"%":_?S=r(9):l,$:C.$,_:x,DBG:d}),console.STAT&&console.STAT(T,+new Date-T,"got in"),!!_&&setTimeout.turn(D)}(),b||C.on("in",{"@":h["#"]})}n.on.get.ack=m}(),function(){n.chain.opt=function(m){m=m||{};var h=this,b=h._,T=m.peers||m;return Object.plain(m)||(m={}),Object.plain(b.opt)||(b.opt=m),typeof T=="string"&&(T=[T]),T instanceof Array&&(Object.plain(b.opt.peers)||(b.opt.peers={}),T.forEach(function(v){var d={};d.id=d.url=v,b.opt.peers[v]=b.opt.peers[v]||d})),b.opt.peers=b.opt.peers||{},i(m,function v(d){var g=this[d];if(this&&this.hasOwnProperty(d)||typeof g=="string"||Object.empty(g)){this[d]=g;return}g&&g.constructor!==Object&&!(g instanceof Array)||i(g,v)}),n.on("opt",b),b.opt.uuid=b.opt.uuid||function(d){return n.state().toString(36).replace(".","")+String.random(d||12)},h}}();var i=function(m,h){Object.keys(m).forEach(h,m)},r=String.random,o=setTimeout.turn,f=n.valid,s=n.state.is,c=n.state.ify,l,p={},y;n.log=function(){return!n.log.off&&y.log.apply(y,arguments),[].slice.call(arguments).join(" ")},n.log.once=function(m,h,b){return(b=n.log.once)[m]=b[m]||0,b[m]++||n.log(h)},typeof window!="undefined"&&((window.GUN=window.Gun=n).window=window);try{typeof a!="undefined"&&(a.exports=n)}catch{}u.exports=n,(n.window||{}).console=(n.window||{}).console||{log:function(){}},(y=console).only=function(m,h){return y.only.i&&m===y.only.i&&y.only.i++&&(y.log.apply(y,arguments)||h)},n.log.once("welcome","Hello wonderful person! :) Thanks for using GUN, please ask for help on http://chat.gun.eco if anything takes you longer than 5min to figure out!")})(t,"./root"),t(function(u){var n=t("./root");n.chain.back=function(o,f){var s;if(o=o||1,o===-1||o===1/0)return this._.root.$;if(o===1)return(this._.back||this._).$;var c=this,l=c._;if(typeof o=="string"&&(o=o.split(".")),o instanceof Array){var p=0,y=o.length,s=l;for(p;p<y;p++)s=(s||i)[o[p]];return r!==s?f?c:s:(s=l.back)?s.$.back(o,f):void 0}if(typeof o=="function"){for(var m,s={back:l};(s=s.back)&&r===(m=o(s,f)););return m}return typeof o=="number"?(l.back||l).$.back(o-1):this};var i={},r})(t,"./back"),t(function(u){var n=t("./root");n.chain.chain=function(v){var d=this,g=d._,S=new(v||d).constructor(d),A=S._,j;return A.root=j=g.root,A.id=++j.once,A.back=d._,A.on=n.on,A.on("in",n.on.in,A),A.on("out",n.on.out,A),S};function i(v){var d,g=this.as,S=g.back,A=g.root,j;if(v.$||(v.$=g.$),this.to.next(v),g.err){g.on("in",{put:g.put=l,$:g.$});return}if(d=v.get){if(A.pass&&(A.pass[g.id]=g),g.lex&&Object.keys(g.lex).forEach(function(C){j[C]=g.lex[C]},j=v.get=v.get||{}),d["#"]||g.soul){if(d["#"]=d["#"]||g.soul,v["#"]||(v["#"]=p(9)),S=A.$.get(d["#"])._,d=d["."]){if(m(S.put,d)&&(j=S.ask&&S.ask[d],(S.ask||(S.ask={}))[d]=S.$.get(d)._,S.on("in",{get:d,put:{"#":S.soul,".":d,":":S.put[d],">":b(A.graph[S.soul],d)}}),j))return}else{if(j=S.ask&&S.ask[""],(S.ask||(S.ask={}))[""]=S,l!==S.put&&(S.on("in",S),j))return;v.$=S.$}return A.ask(s,v),A.on("in",v)}if(d["."])return g.get?(v={get:{".":g.get},$:g.$},(S.ask||(S.ask={}))[g.get]=v.$._,S.on("out",v)):(v={get:g.lex?v.get:{},$:g.$},S.on("out",v));if((g.ask||(g.ask={}))[""]=g,g.get)return d["."]=g.get,(S.ask||(S.ask={}))[g.get]=v.$._,S.on("out",v)}return S.on("out",v)}n.on.out=i;function r(v,d){d=d||this.as;var g=d.root,S=v.$||(v.$=d.$),A=(S||"")._||c,j=v.put||"",C=j["#"],E=j["."],D=l!==j["="]?j["="]:j[":"],B=j[">"]||-1/0,k;if(l!==v.put&&(l===j["#"]||l===j["."]||l===j[":"]&&l===j["="]||l===j[">"])){if(!y(j)){if(!(C=((j||"")._||"")["#"])){console.log("chain not yet supported for",j,"...",v,d);return}return S=d.root.$.get(C),setTimeout.each(Object.keys(j).sort(),function(w){w=="_"||l===(B=b(j,w))||d.on("in",{$:S,put:{"#":C,".":w,"=":j[w],">":B},VIA:v})})}d.on("in",{$:A.back.$,put:{"#":C=A.back.soul,".":E=A.has||A.get,"=":j,">":b(A.back.put,E)},via:v});return}(v.seen||"")[d.id]||((v.seen||(v.seen=function(){}))[d.id]=d,d!==A&&(Object.keys(v).forEach(function(w){j[w]=v[w]},j={}),j.get=d.get||j.get,!d.soul&&!d.has?j.$$$=j.$$$||d.$:A.soul&&(j.$=d.$,j.$$=j.$$||A.$),v=j),f(v,d),(d.soul||v.$$)&&B>=b(g.graph[C],E)&&((j=g.$.get(C)._).put=T(j.put,E,B,D,C)),!A.soul&&B>=b(g.graph[C],E)&&(k=(g.$.get(C)._.next||"")[E])&&(k.put=D,typeof(j=y(D))=="string"&&(k.put=g.$.get(j)._.put||D)),this.to&&this.to.next(v),d.any&&setTimeout.each(Object.keys(d.any),function(w){(w=d.any[w])&&w(v)},0,99),d.echo&&setTimeout.each(Object.keys(d.echo),function(w){(w=d.echo[w])&&w.on("in",v)},0,99),((v.$$||"")._||A).soul&&(k=d.next)&&(k=k[E])&&(j={},Object.keys(v).forEach(function(w){j[w]=v[w]}),j.$=(v.$$||v.$).get(j.get=E),delete j.$$,delete j.$$$,k.on("in",j)),o(v,d))}n.on.in=r;function o(v,d){if(d=d||this.as||v.$._,!(v.$$&&this!==n.on)&&!(!v.put||d.soul)){var g=v.put||"",S=g["="]||g[":"],A,j=d.root,C=j.$.get(g["#"]).get(g["."])._;if(typeof(S=y(S))!="string"){this===n.on&&((C.echo||(C.echo={}))[d.id]=d);return}if(!((C.echo||(C.echo={}))[d.id]&&!(j.pass||"")[d.id])){if(A=j.pass){if(A[S+d.id])return;A[S+d.id]=1}(C.echo||(C.echo={}))[d.id]=d,d.has&&(d.link=S);var E=j.$.get(C.link=S)._;(E.echo||(E.echo={}))[C.id]=C;var A=d.ask||"";(A[""]||d.lex)&&E.on("out",{get:{"#":S}}),setTimeout.each(Object.keys(A),function(D,B){!D||!(B=A[D])||B.on("out",{get:{"#":S,".":D}})},0,99)}}}n.on.link=o;function f(v,d){var g=v.put||"",S=l!==g["="]?g["="]:g[":"],A=d.root,j,C;if(l===S){if(d.soul&&l!==d.put||(C=(v.$$||v.$||"")._||"",v["@"]&&(l!==C.put||l!==d.put)))return;(j=d.link||v.linked)&&delete(A.$.get(j)._.echo||"")[d.id],d.has&&(d.link=null),d.put=l,setTimeout.each(Object.keys(d.next||""),function(E,D){!(D=d.next[E])||(j&&delete(A.$.get(j).get(E)._.echo||"")[D.id],D.on("in",{get:E,put:l,$:D.$}))},0,99);return}d.soul||v.$$||(j=y(S),C=v.$._||"",!((j===C.link||d.has&&!C.link)&&!((A.pass||"")[d.id]&&typeof j!="string"))&&(delete(C.echo||"")[d.id],f({get:d.get,put:l,$:v.$,linked:v.linked=v.linked||C.link},d)))}n.on.unlink=f;function s(v,d){var g=this.as,S=g.$._;S.root;var A=g.get||"",j=(v.put||"")[A["#"]]||"";if(!v.put||typeof A["."]=="string"&&l===j[A["."]]){if(l!==S.put||!S.soul&&!S.has)return;S.ack=(S.ack||0)+1,S.on("in",{get:S.get,put:S.put=l,$:S.$,"@":v["@"]});return}(v._||{}).miss=1,n.on.put(v)}var c={},l,p=String.random,y=n.valid,m=function(v,d){return v&&Object.prototype.hasOwnProperty.call(v,d)},h=n.state,b=h.is,T=h.ify})(t,"./chain"),t(function(u){var n=t("./root");n.chain.get=function(l,p,y){var m,h;if(typeof l=="string"){if(l.length==0)return(m=this.chain())._.err={err:n.log("0 length key!",l)},p&&p.call(m,m._.err),m;var b=this,T=b._,v=T.next||f;(m=v[l])||(m=l&&i(l,b)),m=m&&m.$}else if(typeof l=="function"){let C=function(E,D,B){if(!C.stun&&!((O=g.pass)&&!O[S])){var k=E.$._,w=(E.$$||"")._,_=(w||k).put,x=!k.has&&!k.soul,$={},O;if((x||c===_)&&(_=c===((O=E.put)||"")["="]?c===(O||"")[":"]?O:O[":"]:O["="]),typeof(O=n.valid(_))=="string"&&(_=c===(O=g.$.get(O)._.put)?d.not?c:_:O),!(d.not&&c===_)){if(c===d.stun){if((O=g.stun)&&O.on&&(T.$.back(function(M){if(O.on(""+M.id,$={}),($.run||0)<C.id)return $}),!$.run&&O.on(""+k.id,$={}),!$.run&&w&&O.on(""+w.id,$={}),C.id>$.run&&((!$.stun||$.stun.end)&&($.stun=O.on("stun"),$.stun=$.stun&&$.stun.last),$.stun&&!$.stun.end))){($.stun.add||($.stun.add={}))[S]=function(){C(E,D,1)};return}if(c===_&&(B=0),(O=g.hatch)&&!O.end&&c===d.hatch&&!B){if(A[k.$._.id])return;A[k.$._.id]=1,O.push(function(){C(E,D,1)});return}A={}}if(g.pass){if(g.pass[S+k.id])return;g.pass[S+k.id]=1}if(d.on){d.ok.call(k.$,_,k.get,E,D||C);return}if(d.v2020){d.ok(E,D||C);return}Object.keys(E).forEach(function(M){O[M]=E[M]},O={}),E=O,E.put=_,d.ok.call(d.as,E,D||C)}}};if(p===!0)return r(this,l,p,y),this;m=this;var T=m._,d=p||{},g=T.root,S;d.at=T,d.ok=l;var A={};return C.at=T,(T.any||(T.any={}))[S=String.random(7)]=C,C.off=function(){C.stun=1,!!T.any&&delete T.any[S]},C.rid=o,C.id=d.run||++g.once,h=g.pass,(g.pass={})[S]=1,d.out=d.out||{get:{}},T.on("out",d.out),g.pass=h,m}else{if(typeof l=="number")return this.get(""+l,p,y);if(typeof(h=s(l))=="string")return this.get(h,p,y);(h=this.get.next)&&(m=h(this,l))}return m?(p&&typeof p=="function"&&m.get(p,y),m):((m=this.chain())._.err={err:n.log("Invalid get request!",l)},p&&p.call(m,m._.err),m)};function i(l,p){var y=p._,m=y.next,h=p.chain(),b=h._;return m||(m=y.next={}),m[b.get=l]=b,p===y.root.$?b.soul=l:(y.soul||y.has)&&(b.has=l),b}function r(l,p,y,m){var h=l._,b=0,T;return(T=h.soul||h.link)?p(T,m,h):h.jam?h.jam.push([p,m]):(h.jam=[[p,m]],l.get(function(d,g){if(!(c===d.put&&!h.root.opt.super&&(T=Object.keys(h.root.opt.peers).length)&&++b<=T)){g.rid(d);var S=(S=d.$)&&S._||{},A=0,j;for(T=h.jam,delete h.jam;j=T[A++];){var C=j[0];j=j[1],C&&C(S.link||S.soul||n.valid(d.put)||((d.put||{})._||{})["#"],j,d,g)}}},{out:{get:{".":!0}}}),l)}function o(l){var p=this.at||this.on;if(!l||p.soul||p.has)return this.off();if(!!(l=(l=(l=l.$||l)._||l).id)){p.map;var y;if((y=this.seen||(this.seen={}))[l])return!0;y[l]=!0}}var f={},s=n.valid,c})(t,"./get"),t(function(u){var n=t("./root");n.chain.put=function(y,m,h){var b=this,T=b._,v=T.root;h=h||{},h.root=T.root,h.run||(h.run=v.once),i(h,T.id),h.ack=h.ack||m,h.via=h.via||b,h.data=h.data||y,h.soul||(h.soul=T.soul||typeof m=="string"&&m);var d=h.state=h.state||n.state();return typeof y=="function"?(y(function(g){h.data=g,b.put(f,f,h)}),b):h.soul?(h.$=v.$.get(h.soul),h.todo=[{it:h.data,ref:h.$}],h.turn=h.turn||c,h.ran=h.ran||r,function g(){var S=h.todo,A=S.pop(),j=A.it;A.ref&&A.ref._.id;var C,E,D,B,k;if(i(h,A.ref),(B=A.todo)&&(E=B.pop(),j=j[E],B.length&&S.push(A)),E&&(S.path||(S.path=[])).push(E),!(C=l(j))&&!(k=n.is(j))){if(!Object.plain(j)){(h.ack||s).call(h,h.out={err:h.err=n.log("Invalid data: "+(j&&(B=j.constructor)&&B.name||typeof j)+" at "+(h.via.back(function($){$.get&&B.push($.get)},B=[])||B.join("."))+"."+(S.path||[]).join("."))}),h.ran(h);return}for(var w=h.seen||(h.seen=[]),_=w.length;_--;)if(j===(B=w[_]).it){C=j=B.link;break}}if(E&&C)A.node=p(A.node,E,d,j);else{let $=function(O,M){var N=D.link["#"];M&&(M.off(),M.rid(O));var P=N||O.soul||(B=(O.$$||O.$)._||"").soul||B.link||((B=B.put||"")._||"")["#"]||B["#"]||((B=O.put||"")&&O.$$?B["#"]:(B["="]||B[":"]||"")["#"]);if(!N&&i(h,O.$),!P&&!A.link["#"]){(A.wait||(A.wait=[])).push(function(){$(O,M)});return}P||(P=[],(O.$$||O.$).back(function(I){if(B=I.soul||I.link)return P.push(B);P.push(I.get)}),P=P.reverse().join("/")),D.link["#"]=P,!k&&(((h.graph||(h.graph={}))[P]=D.node||(D.node={_:{}}))._["#"]=P),delete h.wait[x],D.wait&&setTimeout.each(D.wait,function(I){I&&I()}),h.ran(h)};h.seen.push(D={it:j,link:{},todo:k?[]:Object.keys(j).sort().reverse(),path:(S.path||[]).slice(),up:A}),A.node=p(A.node,E,d,D.link),!k&&D.todo.length&&S.push(D);var x=h.seen.length;(h.wait||(h.wait={}))[x]="",B=(D.ref=k?j:E?A.ref.get(E):A.ref)._,(B=j&&(j._||"")["#"]||B.soul||B.link)?$({soul:B}):D.ref.get($,{run:h.run,v2020:1,out:{get:{".":" "}}})}if(!S.length)return h.ran(h);h.turn(g)}(),b):(o(h),b)};function i(y,m){if(!!m){m=(m._||"").id||m;var h=y.root.stun||(y.root.stun={on:n.on}),b={},T;y.stun||(y.stun=h.on("stun",function(){})),(T=h.on(""+m))&&T.the.last.next(b),!(b.run>=y.run)&&h.on(""+m,function(v){if(y.stun.end){this.off(),this.to.next(v);return}v.run=v.run||y.run,v.stun=v.stun||y.stun})}}function r(y){if(y.err){r.end(y.stun,y.root);return}if(!(y.todo.length||y.end||!Object.empty(y.wait))){y.end=1;var m=y.$.back(-1)._,h=m.root,b=m.ask(function(g){h.on("ack",g),g.err&&n.log(g),++T>(y.acks||0)&&this.off(),!!y.ack&&y.ack(g,this)},y.opt),T=0,v=y.stun,d;(d=function(){!v||(r.end(v,h),setTimeout.each(Object.keys(v=v.add||""),function(g){(g=v[g])&&g()}))}).hatch=d,y.via._.on("out",{put:y.out=y.graph,opt:y.opt,"#":b,_:d})}}r.end=function(y,m){y.end=s,y.the.to===y&&y===y.the.last&&delete m.stun,y.off()};function o(y){var m=y.via._,h;y.via=y.via.back(function(b){if(b.soul||!b.get)return b.$;h=y.data,(y.data={})[b.get]=h}),(!y.via||!y.via._.soul)&&(y.via=m.root.$.get(((y.data||"")._||"")["#"]||m.$.back("opt.uuid")())),y.via.put(y.data,y.ack,y)}var f,s=function(){},c=setTimeout.turn,l=n.valid,p=n.state.ify})(t,"./put"),t(function(u){var n=t("./root");t("./chain"),t("./back"),t("./put"),t("./get"),u.exports=n})(t,"./index"),t(function(u){var n=t("./index");n.chain.on=function(o,f,s,c){var l=this,p=l._;p.root;var y;if(typeof o=="string")return f?(y=p.on(o,f,s||p,c),s&&s.$&&(s.subs||(s.subs=[])).push(y),l):p.on(o);var m=f;return(m=m===!0?{change:!0}:m||{}).not=1,m.on=1,l.get(o,m),l},n.chain.once=function(o,f){if(f=f||{},!o)return i(this);var s=this,c=s._,l=c.root;c.put;var p=String.random(7),y;return s.get(function(m,h,b,T){var v=this,d=v._,g=d.one||(d.one={});if(T.stun||g[p]==="")return;if((y=n.valid(m))===!0){S();return}if(typeof y=="string")return;clearTimeout((c.one||"")[p]),clearTimeout(g[p]),g[p]=setTimeout(S,f.wait||99);function S(){!d.has&&!d.soul&&(d={put:m,get:h}),r===(y=d.put)&&(y=((b.$$||"")._||"").put),!(typeof n.valid(y)=="string"&&(y=l.$.get(y)._.put,y===r))&&(T.stun||g[p]!==""&&(g[p]="",(c.soul||c.has)&&T.off(),o.call(v,y,d.get)))}},{on:1}),s};function i(o,f,s){return n.log.once("valonce","Chainable val is experimental, its behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),(s=o.chain())._.nix=o.once(function(c,l){s._.on("in",this._)}),s._.lex=o._.lex,s}n.chain.off=function(){var o=this,f=o._,s,c=f.back;if(!!c)return f.ack=0,(s=c.next)&&s[f.get]&&delete s[f.get],(s=c.ask)&&delete s[f.get],(s=c.put)&&delete s[f.get],(s=f.soul)&&delete c.root.graph[s],(s=f.map)&&Object.keys(s).forEach(function(l,p){p=s[l],p.link&&c.root.$.get(p.link).off()}),(s=f.next)&&Object.keys(s).forEach(function(l,p){p=s[l],p.$.off()}),f.on("off",{}),o};var r})(t,"./on"),t(function(u){var n=t("./index"),i=n.chain.get.next;n.chain.get.next=function(s,c){var l;return Object.plain(c)?(l=((l=c["#"])||"")["="]||l)?s.get(l):((l=s.chain()._).lex=c,s.on("in",function(p){String.match(p.get||(p.put||"")["."],c["."]||c["#"]||c)&&l.on("in",p),this.to.next(p)}),l.$):(i||o)(s,c)},n.chain.map=function(s,c,l){var p=this,y=p._,m,h;return Object.plain(s)&&(m=s["."]?s:{".":s},s=f),s?(n.log.once("mapfn","Map functions are experimental, their behavior and API may change moving forward. Please play with it and report bugs and ideas on how to improve it."),h=p.chain(),p.map().on(function(b,T,v,d){var g=(s||o).call(this,b,T,v,d);if(f!==g){if(b===g)return h._.on("in",v);if(n.is(g))return h._.on("in",g._);var S={};Object.keys(v.put).forEach(function(A){S[A]=v.put[A]},S),S["="]=g,h._.on("in",{get:T,put:S})}}),h):((h=y.each)||((y.each=h=p.chain())._.lex=m||h._.lex||y.lex,h._.nix=p.back("nix"),p.on("in",r,h._)),h)};function r(s){this.to.next(s);var c=this.as,l=s.$,p=l._,y=s.put,m;!p.soul&&!s.$$||(m=c.lex)&&!String.match(s.get||(y||"")["."],m["."]||m["#"]||m)||n.on.link(s,c)}var o=function(){},f})(t,"./map"),t(function(u){var n=t("./index");n.chain.set=function(i,r,o){var f=this,s=f.back(-1),c,l;return r=r||function(){},o=o||{},o.item=o.item||i,(c=((i||"")._||"")["#"])&&((i={})["#"]=c),typeof(l=n.valid(i))=="string"?f.get(c=l).put(i,r,o):n.is(i)?(f.put(function(p){i.get(function(y,m,h){if(!y)return r.call(f,{err:n.log('Only a node can be linked! Not "'+h.put+'"!')});(l={})[y]={"#":y},p(l)},!0)}),i):(Object.plain(i)&&(i=s.get(c=f.back("opt.uuid")()).put(i)),f.get(c||s.back("opt.uuid")(7)).put(i,r,o))}})(t,"./set"),t(function(u){t("./shim");function n(r){var o=function(){},f=r.opt||{};f.log=f.log||console.log,f.gap=f.gap||f.wait||0,f.max=f.max||(f.memory?f.memory*999*999:3e8)*.3,f.pack=f.pack||f.max*.01*.01,f.puff=f.puff||9;var s=setTimeout.turn||setTimeout,c=JSON.parseAsync||function(d,g,S){var A;try{g(A,JSON.parse(d,S))}catch(j){g(j)}},l=JSON.stringifyAsync||function(d,g,S,A){var j;try{g(j,JSON.stringify(d,S,A))}catch(C){g(C)}},p=r.dup,y=p.check,m=p.track,h=o.hear=function(d,g){if(!!d){if(f.max<=d.length)return o.say({dam:"!",err:"Message too big!"},g);o===this&&(h.d+=d.length||0,++h.c);var S=g.SH=+new Date,A=d[0],j;if(A==="["){c(d,function(C,E){if(C||!E)return o.say({dam:"!",err:"DAM JSON parse error."},g);console.STAT&&console.STAT(+new Date,E.length,"# on hear batch");var D=f.puff;(function B(){for(var k=+new Date,w=0,_;w<D&&(_=E[w++]);)h(_,g);E=E.slice(w),console.STAT&&console.STAT(k,+new Date-k,"hear loop"),b(g),!!E.length&&s(B,0)})()}),d="";return}if(A==="{"||(d["#"]||Object.plain(d))&&(j=d)){if(j)return h.one(j,g,S);c(d,function(C,E){if(C||!E)return o.say({dam:"!",err:"DAM JSON parse error."},g);h.one(E,g,S)});return}}};h.one=function(d,g,S){var A,j,C,E,D;if(d.DBG&&(d.DBG=D={DBG:d.DBG}),D&&(D.h=S),D&&(D.hp=+new Date),(A=d["#"])||(A=d["#"]=String.random(9)),!(C=y(A))&&(j=d["##"],!(j&&(C=d["@"]||d.get&&A)&&p.check(E=C+j)))){if((d._=function(){}).via=o.leap=g,(C=d["><"])&&typeof C=="string"&&C.slice(0,99).split(",").forEach(function(B){this[B]=1},d._.yo={}),C=d.dam){(C=o.hear[C])&&C(d,g,r),m(A);return}var S=+new Date;D&&(D.is=S),g.SI=A,r.on("in",o.last=d),D&&(D.hd=+new Date),console.STAT&&console.STAT(S,+new Date-S,d.get?"msg get":d.put?"msg put":"msg"),(C=m(A)).via=g,d.get&&(C.it=d),E&&m(E),o.leap=o.last=null}},h.c=h.d=0,function(){var d=0,g;o.hash=function(C,E){var D,B,k,w=+new Date;l(C.put,function _(x,$){var O=(B||(B=k=$||"")).slice(0,32768);if(D=String.hash(O,D),B=B.slice(32768),B){s(_,0);return}console.STAT&&console.STAT(w,+new Date-w,"say json+hash"),C._.$put=k,C["##"]=D,j(C,E),delete C._.$put},S)};function S(C,E){var D;return E instanceof Object?(Object.keys(E).sort().forEach(A,{to:D={},on:E}),D):E}function A(C){this.to[C]=this.on[C]}var j=o.say=function(C,E){var D;if((D=this)&&(D=D.to)&&D.next&&D.next(C),!C)return!1;var B,k,w=C["@"],_=C._||(C._=function(){}),x=C.DBG,$=+new Date;if(_.y=_.y||$,E||x&&(x.y=$),(B=C["#"])||(B=C["#"]=String.random(9)),!g&&m(B),C.put&&(C.err||(p.s[B]||"").err))return!1;if(!C["##"]&&i!==C.put&&!_.via&&w){o.hash(C,E);return}if(!E&&w&&(E=(D=p.s[w])&&(D.via||(D=D.it)&&(D=D._)&&D.via)||(D=o.last)&&w===D["#"]&&o.leap),!E&&w)return p.s[w]?void 0:(console.STAT&&console.STAT(+new Date,++d,"total no peer to ack to"),!1);if(!E&&o.way)return o.way(C);if(x&&(x.yh=+new Date),!(k=_.raw)){o.raw(C,E);return}if(x&&(x.yr=+new Date),!E||!E.id){if(!Object.plain(E||f.peers))return!1;var $=+new Date;f.puff;var O=f.peers,M=Object.keys(E||f.peers||{});console.STAT&&console.STAT($,+new Date-$,"peer keys"),function I(){var K=+new Date;g=1;var U=_.raw;_.raw=k;for(var V=0,L;V<9&&(L=(M||"")[V++]);)!(L=O[L])||j(C,L);_.raw=U,g=0,M=M.slice(V),console.STAT&&console.STAT(K,+new Date-K,"say loop"),!!M.length&&(s(I,0),w&&m(w))}();return}if(!E.wire&&o.wire&&o.wire(E),B!==E.last){if(E.last=B,E===_.via||(D=_.yo)&&(D[E.url]||D[E.pid]||D[E.id]))return!1;if(console.STAT&&console.STAT($,((x||_).yp=+new Date)-(_.y||$),"say prep"),!g&&w&&m(w),E.batch){if(E.tail=(D=E.tail||0)+k.length,E.tail<=f.pack){E.batch+=(D?",":"")+k;return}b(E)}E.batch="[";var N=+new Date;setTimeout(function(){console.STAT&&console.STAT(N,+new Date-N,"0ms TO"),b(E)},f.gap),T(k,E),console.STAT&&w===E.SI&&console.STAT($,+new Date-E.SH,"say ack")}};o.say.c=o.say.d=0,o.raw=function(C,E){if(!C)return"";var D=C._||{},B,k;if(k=D.raw)return k;if(typeof C=="string")return C;var w=C["##"],_=C["@"];if(w&&_){if(!D.via&&y(_+w))return!1;if((k=(p.s[_]||"").it)||(k=o.last)&&_===k["#"]){if(w===k["##"])return!1;k["##"]||(k["##"]=w)}}if(!C.dam){var x=0,$=[];k=f.peers;for(var O in k){var M=k[O];if($.push(M.url||M.pid||M.id),++x>6)break}x>1&&(C["><"]=$.join())}if(B=D.$put){k={},Object.keys(C).forEach(function(P){k[P]=C[P]}),k.put=":])([:",l(k,function(P,I){if(!P){var K=+new Date;k=I.indexOf('"put":":])([:"'),N(i,I=I.slice(0,k+6)+B+I.slice(k+14)),console.STAT&&console.STAT(K,+new Date-K,"say slice")}});return}l(C,N);function N(P,I){P||(D.raw=I,j(C,E))}}}();function b(d){var g=d.batch,S=typeof g=="string";if(S&&(g+="]"),d.batch=d.tail=null,!!g&&!(S?3>g.length:!g.length)){if(!S)try{g=g.length===1?g[0]:JSON.stringify(g)}catch(A){return f.log("DAM JSON stringify error",A)}!g||T(g,d)}}function T(d,g){try{var S=g.wire;g.say?g.say(d):S.send&&S.send(d),o.say.d+=d.length||0,++o.say.c}catch{(g.queue=g.queue||[]).push(d)}}o.hi=function(d){var g=d.wire||{};d.id?f.peers[d.url||d.id]=d:(g=d.id=d.id||String.random(9),o.say({dam:"?",pid:r.opt.pid},f.peers[g]=d),delete p.s[d.last]),d.met=d.met||+new Date,g.hied||r.on(g.hied="hi",d),g=d.queue,d.queue=[],setTimeout.each(g||[],function(S){T(S,d)},0,9)},o.bye=function(d){r.on("bye",d);var g=+new Date;g=g-(d.met||g),o.bye.time=((o.bye.time||g)+g)/2},o.hear["!"]=function(d,g){f.log("Error:",d.err)},o.hear["?"]=function(d,g){d.pid&&(g.pid||(g.pid=d.pid),d["@"])||(o.say({dam:"?",pid:f.pid,"@":d["#"]},g),delete p.s[g.last])},r.on("create",function(d){d.opt.pid=d.opt.pid||String.random(9),this.to.next(d),d.on("out",o.say)}),r.on("bye",function(d,g){d=f.peers[d.id||d]||d,this.to.next(d),d.bye?d.bye():(g=d.wire)&&g.close&&g.close(),delete f.peers[d.id],d.wire=null});var v={};return r.on("bye",function(d,g){this.to.next(d),(g=console.STAT)&&(g.peers=(g.peers||0)-1),!!(g=d.url)&&(v[g]=!0,setTimeout(function(){delete v[g]},f.lack||9e3))}),r.on("hi",function(d,g){this.to.next(d),(g=console.STAT)&&(g.peers=(g.peers||0)+1),!(!(g=d.url)||!v[g])&&(delete v[g],!f.super&&setTimeout.each(Object.keys(r.next),function(S){r.next[S],g={},g[S]=r.graph[S],g=String.hash(g),o.say({"##":g,get:{"#":S}},d)}))}),o}var i;try{u.exports=n}catch{}})(t,"./mesh"),t(function(u){var n=t("../index");n.Mesh=t("./mesh"),n.on("opt",function(r){if(this.to.next(r),r.once)return;var o=r.opt;if(o.WebSocket===!1)return;var f=n.window||{},s=o.WebSocket||f.WebSocket||f.webkitWebSocket||f.mozWebSocket;if(!s)return;o.WebSocket=s;var c=o.mesh=o.mesh||n.Mesh(r);c.wire||o.wire,c.wire=o.wire=l;function l(h){try{if(!h||!h.url)return T&&T(h);var b=h.url.replace(/^http/,"ws"),T=h.wire=new o.WebSocket(b);return T.onclose=function(){o.mesh.bye(h),y(h)},T.onerror=function(v){y(h)},T.onopen=function(){o.mesh.hi(h)},T.onmessage=function(v){!v||o.mesh.hear(v.data||v,h)},T}catch{}}setTimeout(function(){!o.super&&r.on("out",{dam:"hi"})},1);var p=2*999;function y(h){clearTimeout(h.defer),!(m&&h.retry<=0)&&(h.retry=(h.retry||o.retry+1||60)-(-h.tried+(h.tried=+new Date)<p*4?1:0),h.defer=setTimeout(function b(){if(m&&m.hidden)return setTimeout(b,p);l(h)},p))}var m=""+i!=typeof document&&document});var i})(t,"./websocket"),t(function(u){if(typeof Gun!="undefined"){var n=function(){},i;try{i=(Gun.window||n).localStorage}catch{}i||(Gun.log("Warning: No localStorage exists to persist data to!"),i={setItem:function(r,o){this[r]=o},removeItem:function(r){delete this[r]},getItem:function(r){return this[r]}}),Gun.on("create",function r(o){this.to.next(o);var f=o.opt;o.graph;var s=[],c,l;if(f.localStorage===!1)return;f.prefix=f.file||"gun/";try{c=r[f.prefix]=r[f.prefix]||JSON.parse(i.getItem(f.prefix))||{}}catch{c=r[f.prefix]={}}o.on("get",function(y){this.to.next(y);var m=y.get,h,b,T,v;!m||!(h=m["#"])||(b=c[h]||v,b&&(T=m["."])&&!Object.plain(T)&&(b=Gun.state.ify({},T,Gun.state.is(b,T),b[T],h)),Gun.on.get.ack(y,b))}),o.on("put",function(y){this.to.next(y);var m=y.put,h=m["#"],b=m["."];c[h]=Gun.state.ify(c[h],b,m[">"],m[":"],h),y["@"]||s.push(y["#"]),!l&&(l=setTimeout(p,f.wait||1))});function p(){var y,m=s;clearTimeout(l),l=!1,s=[];try{i.setItem(f.prefix,JSON.stringify(c))}catch(h){Gun.log((y=h||"localStorage failure")+" Consider using GUN's IndexedDB plugin for RAD for more storage space, https://gun.eco/docs/RAD#install"),o.on("localStorage:error",{err:y,get:f.prefix,put:c})}!y&&!Object.empty(f.peers)||setTimeout.each(m,function(h){o.on("in",{"@":h,err:y,ok:0})})}})}})(t,"./localStorage")})(),function(){var t;if(""+t!=typeof Gun){var a=function(k){console.log("Warning! Deprecated internal utility will break in next version:",k)},u=Gun;u.fn=u.fn||{is:function(k){return a("fn"),!!k&&typeof k=="function"}},u.bi=u.bi||{is:function(k){return a("bi"),k instanceof Boolean||typeof k=="boolean"}},u.num=u.num||{is:function(k){return a("num"),!i(k)&&(k-parseFloat(k)+1>=0||k===1/0||k===-1/0)}},u.text=u.text||{is:function(k){return a("text"),typeof k=="string"}},u.text.ify=u.text.ify||function(k){return a("text.ify"),u.text.is(k)?k:typeof JSON!="undefined"?JSON.stringify(k):k&&k.toString?k.toString():k},u.text.random=u.text.random||function(k,w){a("text.random");var _="";for(k=k||24,w=w||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXZabcdefghijklmnopqrstuvwxyz";k>0;)_+=w.charAt(Math.floor(Math.random()*w.length)),k--;return _},u.text.match=u.text.match||function(k,w){var _,x;return a("text.match"),typeof k!="string"?!1:(typeof w=="string"&&(w={"=":w}),w=w||{},_=w["="]||w["*"]||w[">"]||w["<"],k===_?!0:x!==w["="]?!1:(_=w["*"]||w[">"]||w["<"],k.slice(0,(_||"").length)===_?!0:x!==w["*"]?!1:x!==w[">"]&&x!==w["<"]?k>=w[">"]&&k<=w["<"]:x!==w[">"]&&k>=w[">"]||x!==w["<"]&&k<=w["<"]))},u.text.hash=u.text.hash||function(k,w){if(a("text.hash"),typeof k=="string"){if(w=w||0,!k.length)return w;for(var _=0,x=k.length,$;_<x;++_)$=k.charCodeAt(_),w=(w<<5)-w+$,w|=0;return w}},u.list=u.list||{is:function(k){return a("list"),k instanceof Array}},u.list.slit=u.list.slit||Array.prototype.slice,u.list.sort=u.list.sort||function(k){return a("list.sort"),function(w,_){return!w||!_?0:(w=w[k],_=_[k],w<_?-1:w>_?1:0)}},u.list.map=u.list.map||function(k,w,_){return a("list.map"),s(k,w,_)},u.list.index=1,u.obj=u.boj||{is:function(k){return a("obj"),k?k instanceof Object&&k.constructor===Object||Object.prototype.toString.call(k).match(/^\[object (\w+)\]$/)[1]==="Object":!1}},u.obj.put=u.obj.put||function(k,w,_){return a("obj.put"),(k||{})[w]=_,k},u.obj.has=u.obj.has||function(k,w){return a("obj.has"),k&&Object.prototype.hasOwnProperty.call(k,w)},u.obj.del=u.obj.del||function(k,w){if(a("obj.del"),!!k)return k[w]=null,delete k[w],k},u.obj.as=u.obj.as||function(k,w,_,x){return a("obj.as"),k[w]=k[w]||(x===_?{}:_)},u.obj.ify=u.obj.ify||function(k){if(a("obj.ify"),o(k))return k;try{k=JSON.parse(k)}catch{k={}}return k},function(){var k;function w(_,x){f(this,x)&&k!==this[x]||(this[x]=_)}u.obj.to=u.obj.to||function(_,x){return a("obj.to"),x=x||{},s(_,w,x),x}}(),u.obj.copy=u.obj.copy||function(k){return a("obj.copy"),k&&JSON.parse(JSON.stringify(k))},function(){function k(w,_){var x=this.n,$;if(!(x&&(_===x||o(x)&&f(x,_)))&&$!==_)return!0}u.obj.empty=u.obj.empty||function(w,_){return a("obj.empty"),w?!s(w,k,{n:_}):!0}}(),function(){function k(x,$){if(arguments.length===2){k.r=k.r||{},k.r[x]=$;return}k.r=k.r||[],k.r.push(x)}var w=Object.keys,_;Object.keys=Object.keys||function(x){return _(x,function($,O,M){M(O)})},u.obj.map=_=u.obj.map||function(x,$,O){a("obj.map");var M,N=0,P,I,K,U,V=typeof $=="function";if(k.r=M,w&&o(x)&&(K=w(x),U=!0),O=O||{},i(x)||K)for(P=(K||x).length;N<P;N++){var L=N+u.list.index;if(V){if(I=U?$.call(O,x[K[N]],K[N],k):$.call(O,x[N],L,k),I!==M)return I}else if($===x[U?K[N]:N])return K?K[N]:L}else for(N in x)if(V){if(f(x,N)&&(I=O?$.call(O,x[N],N,k):$(x[N],N,k),I!==M))return I}else if($===x[N])return N;return V?k.r:u.list.index?0:-1}}(),u.time=u.time||{},u.time.is=u.time.is||function(k){return a("time"),k?k instanceof Date:+new Date().getTime()};var n=u.fn.is,i=u.list.is,r=u.obj,o=r.is,f=r.has,s=r.map,c={};c.is=function(k){return a("val.is"),k===t?!1:k===null?!0:k===1/0?!1:m(k)||p(k)||y(k)?!0:c.link.is(k)||!1},c.link=c.rel={_:"#"},function(){c.link.is=function(w){if(a("val.link.is"),w&&w[l]&&!w._&&o(w)){var _={};if(s(w,k,_),_.id)return _.id}return!1};function k(w,_){var x=this;if(x.id)return x.id=!1;if(_==l&&m(w))x.id=w;else return x.id=!1}}(),c.link.ify=function(k){return a("val.link.ify"),h({},l,k)},u.obj.has._=".";var l=c.link._,t,p=u.bi.is,y=u.num.is,m=u.text.is,r=u.obj,o=r.is,h=r.put,s=r.map;u.val=u.val||c;var b={_:"_"};b.soul=function(k,w){return a("node.soul"),k&&k._&&k._[w||g]},b.soul.ify=function(k,w){return a("node.soul.ify"),w=typeof w=="string"?{soul:w}:w||{},k=k||{},k._=k._||{},k._[g]=w.soul||k._[g]||d(),k},b.soul._=c.link._,function(){b.is=function(w,_,x){a("node.is");var $;return o(w)&&($=b.soul(w))?!s(w,k,{as:x,cb:_,s:$,n:w}):!1};function k(w,_){if(_!==b._){if(!c.is(w))return!0;this.cb&&this.cb.call(this.as,w,_,this.n,this.s)}}}(),function(){b.ify=function(w,_,x){return a("node.ify"),_?typeof _=="string"?_={soul:_}:typeof _=="function"&&(_={map:_}):_={},_.map&&(_.node=_.map.call(x,w,t,_.node||{})),(_.node=b.soul.ify(_.node||{},_))&&s(w,k,{o:_,as:x}),_.node};function k(w,_){var x=this.o,$,O;if(x.map){$=x.map.call(this.as,w,""+_,x.node),O===$?T(x.node,_):x.node&&(x.node[_]=$);return}c.is(w)&&(x.node[_]=w)}}();var r=u.obj,o=r.is,T=r.del,s=r.map,v=u.text,d=v.random,g=b.soul._,t;u.node=u.node||b;var S=u.state;S.lex=function(){return a("state.lex"),S().toString(36).replace(".","")},S.to=function(k,w,_){a("state.to");var x=(k||{})[w];return o(x)&&(x=A(x)),S.ify(_,w,S.is(k,w),x,b.soul(k))},function(){S.map=function(w,_,x){a("state.map");var $,O=o(O=w||_)?O:null;return w=n(w=w||_)?w:null,O&&!w?(_=y(_)?_:S(),O[E]=O[E]||{},s(O,k,{o:O,s:_}),O):(x=x||o(_)?_:$,_=y(_)?_:S(),function(M,N,P,I){if(!w)return k.call({o:P,s:_},M,N),M;w.call(x||this||{},M,N,P,I),!(f(P,N)&&$===P[N])&&k.call({o:P,s:_},M,N)})};function k(w,_){E!==_&&S.ify(this.o,_,this.s)}}();var r=u.obj;r.as;var f=r.has,o=r.is,s=r.map,A=r.copy,j=u.num,y=j.is,C=u.fn,n=C.is,E=b._,t,D={};(function(){D.is=function(_,x,$,O){return a("graph.is"),!_||!o(_)||B(_)?!1:!s(_,k,{cb:x,fn:$,as:O})};function k(_,x){if(!_||x!==b.soul(_)||!b.is(_,this.fn,this.as))return!0;!this.cb||(w.n=_,w.as=this.as,this.cb.call(w.as,_,x,w))}function w(_){_&&b.is(w.n,_,w.as)}})(),function(){D.ify=function(O,M,N){a("graph.ify");var P={path:[],obj:O};return M?typeof M=="string"?M={soul:M}:typeof M=="function"&&(M.map=M):M={},typeof N=="string"&&(M.soul=M.soul||N,N=t),M.soul&&(P.link=c.link.ify(M.soul)),M.shell=(N||{}).shell,M.graph=M.graph||{},M.seen=M.seen||[],M.as=M.as||N,k(M,P),M.root=P.node,M.graph};function k(O,M){var N;return(N=$(O,M))?N:(M.env=O,M.soul=_,b.ify(M.obj,w,M)&&(M.link=M.link||c.link.ify(b.soul(M.node)),M.obj!==O.shell&&(O.graph[c.link.is(M.link)]=M.node)),M)}function w(O,M,N){var P=this,I=P.env,K,U;if(b._===M&&f(O,c.link._))return N._;if(!!(K=x(O,M,N,P,I))){if(M||(P.node=P.node||N||{},f(O,b._)&&b.soul(O)&&(P.node._=A(O._)),P.node=b.soul.ify(P.node,c.link.is(P.link)),P.link=P.link||c.link.ify(b.soul(P.node))),(U=I.map)&&(U.call(I.as||{},O,M,N,P),f(N,M))){if(O=N[M],t===O){T(N,M);return}if(!(K=x(O,M,N,P,I)))return}if(!M)return P.node;if(K===!0)return O;if(U=k(I,{obj:O,path:P.path.concat(M)}),!!U.node)return U.link}}function _(O){var M=this,N=c.link.is(M.link),P=M.env.graph;M.link=M.link||c.link.ify(O),M.link[c.link._]=O,M.node&&M.node[b._]&&(M.node[b._][c.link._]=O),f(P,N)&&(P[O]=P[N],T(P,N))}function x(O,M,N,P,I){var K;if(c.is(O))return!0;if(o(O))return 1;if(K=I.invalid)return O=K.call(I.as||{},O,M,N),x(O,M,N,P,I);I.err="Invalid value at '"+P.path.concat(M).join(".")+"'!",u.list.is(O)&&(I.err+=" Use `.set(item)` instead of an Array.")}function $(O,M){for(var N=O.seen,P=N.length,I;P--;)if(I=N[P],M.obj===I.obj)return I;N.push(M)}}(),D.node=function(k){a("graph.node");var w=b.soul(k);if(!!w)return h({},w,k)},function(){D.to=function(w,_,x){if(a("graph.to"),!!w){var $={};return x=x||{seen:{}},s(w[_],k,{obj:$,graph:w,opt:x}),$}};function k(w,_){var x,$;if(b._===_){if(B(w,c.link._))return;this.obj[_]=A(w);return}if(!(x=c.link.is(w))){this.obj[_]=w;return}if($=this.opt.seen[x]){this.obj[_]=$;return}this.obj[_]=this.opt.seen[x]=D.to(this.graph,x,this.opt)}}();var n=u.fn.is,r=u.obj,o=r.is,T=r.del,f=r.has,B=r.empty,h=r.put,s=r.map,A=r.copy,t;u.graph=u.graph||D}}()})(xe);var Yr=xe.exports,jn={exports:{}};(function(e){(function(){function t(u,n){return n?De(u):u.slice?t[i(u)]:function(r,o){u(r={exports:{}}),t[i(o)]=r.exports};function i(r){return r.split("/").slice(-1).toString().replace(".js","")}}var a=e;t(function(u){typeof window!="undefined"&&(u.window=window);var n=u.window||u,i,r=n.SEA||{};(r.window=u.window)&&(r.window.SEA=r);try{i+""!=typeof a&&(a.exports=r)}catch{}u.exports=r})(t,"./root"),t(function(u){var n=t("./root");try{n.window&&location.protocol.indexOf("s")<0&&location.host.indexOf("localhost")<0&&!/^127\.\d+\.\d+\.\d+$/.test(location.hostname)&&location.protocol.indexOf("file:")<0&&(console.warn("HTTPS needed for WebCrypto in SEA, redirecting..."),location.protocol="https:")}catch{}})(t,"./https"),t(function(u){var n;if(n+""==typeof btoa){if(n+""==typeof Buffer)try{vt.Buffer=t("buffer",1).Buffer}catch{console.log("Please `npm install buffer` or add it to your package.json !")}vt.btoa=function(i){return Buffer.from(i,"binary").toString("base64")},vt.atob=function(i){return Buffer.from(i,"base64").toString("binary")}}})(t,"./base64"),t(function(u){t("./base64");function n(){}Object.assign(n,{from:Array.from}),n.prototype=Object.create(Array.prototype),n.prototype.toString=function(i,r,o){i=i||"utf8",r=r||0;const f=this.length;if(i==="hex"){const s=new Uint8Array(this);return[...Array((o&&o+1||f)-r).keys()].map(c=>s[c+r].toString(16).padStart(2,"0")).join("")}if(i==="utf8")return Array.from({length:(o||f)-r},(s,c)=>String.fromCharCode(this[c+r])).join("");if(i==="base64")return btoa(this)},u.exports=n})(t,"./array"),t(function(u){t("./base64");var n=t("./array");function i(...r){return console.warn("new SafeBuffer() is depreciated, please use SafeBuffer.from()"),i.from(...r)}i.prototype=Object.create(Array.prototype),Object.assign(i,{from(){if(!Object.keys(arguments).length||arguments[0]==null)throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");const r=arguments[0];let o;if(typeof r=="string"){const s=arguments[1]||"utf8";if(s==="hex"){const c=r.match(/([\da-fA-F]{2})/g).map(l=>parseInt(l,16));if(!c||!c.length)throw new TypeError("Invalid first argument for type 'hex'.");o=n.from(c)}else if(s==="utf8"||s==="binary"){const c=r.length,l=new Uint16Array(c);Array.from({length:c},(p,y)=>l[y]=r.charCodeAt(y)),o=n.from(l)}else if(s==="base64"){const c=atob(r),l=c.length,p=new Uint8Array(l);Array.from({length:l},(y,m)=>p[m]=c.charCodeAt(m)),o=n.from(p)}else s==="binary"?o=n.from(r):console.info("SafeBuffer.from unknown encoding: "+s);return o}if(r.byteLength,r.byteLength?r.byteLength:r.length){let s;return r instanceof ArrayBuffer&&(s=new Uint8Array(r)),n.from(s||r)}},alloc(r,o=0){return n.from(new Uint8Array(Array.from({length:r},()=>o)))},allocUnsafe(r){return n.from(new Uint8Array(Array.from({length:r})))},concat(r){if(!Array.isArray(r))throw new TypeError("First argument must be Array containing ArrayBuffer or Uint8Array instances.");return n.from(r.reduce((o,f)=>o.concat(Array.from(f)),[]))}}),i.prototype.from=i.from,i.prototype.toString=n.prototype.toString,u.exports=i})(t,"./buffer"),t(function(u){const n=t("./root"),i={Buffer:t("./buffer")};var r={},o;if(JSON.parseAsync=JSON.parseAsync||function(s,c,l){var p;try{c(p,JSON.parse(s,l))}catch(y){c(y)}},JSON.stringifyAsync=JSON.stringifyAsync||function(s,c,l,p){var y;try{c(y,JSON.stringify(s,l,p))}catch(m){c(m)}},i.parse=function(s,c){return new Promise(function(l,p){JSON.parseAsync(s,function(y,m){y?p(y):l(m)},c)})},i.stringify=function(s,c,l){return new Promise(function(p,y){JSON.stringifyAsync(s,function(m,h){m?y(m):p(h)},c,l)})},n.window&&(i.crypto=window.crypto||window.msCrypto,i.subtle=(i.crypto||r).subtle||(i.crypto||r).webkitSubtle,i.TextEncoder=window.TextEncoder,i.TextDecoder=window.TextDecoder,i.random=s=>i.Buffer.from(i.crypto.getRandomValues(new Uint8Array(i.Buffer.alloc(s))))),!i.TextDecoder){const{TextEncoder:s,TextDecoder:c}=t((o+""==typeof a?".":"")+"./lib/text-encoding",1);i.TextDecoder=c,i.TextEncoder=s}if(!i.crypto)try{var f=t("crypto",1);Object.assign(i,{crypto:f,random:c=>i.Buffer.from(f.randomBytes(c))});const{Crypto:s}=t("@peculiar/webcrypto",1);i.ossl=i.subtle=new s({directory:"ossl"}).subtle}catch{console.log("Please `npm install @peculiar/webcrypto` or add it to your package.json !")}u.exports=i})(t,"./shim"),t(function(u){var n=t("./root"),i=t("./shim"),r={};r.pbkdf2={hash:{name:"SHA-256"},iter:1e5,ks:64},r.ecdsa={pair:{name:"ECDSA",namedCurve:"P-256"},sign:{name:"ECDSA",hash:{name:"SHA-256"}}},r.ecdh={name:"ECDH",namedCurve:"P-256"},r.jwk=function(o,f){o=o.split(".");var s=o[0],c=o[1],l={kty:"EC",crv:"P-256",x:s,y:c,ext:!0};return l.key_ops=f?["sign"]:["verify"],f&&(l.d=f),l},r.keyToJwk=function(o){const s=o.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return{kty:"oct",k:s,ext:!1,alg:"A256GCM"}},r.recall={validity:12*60*60,hook:function(o){return o}},r.check=function(o){return typeof o=="string"&&o.slice(0,4)==="SEA{"},r.parse=async function(f){try{var s=typeof f=="string";return s&&f.slice(0,4)==="SEA{"&&(f=f.slice(3)),s?await i.parse(f):f}catch{}return f},n.opt=r,u.exports=r})(t,"./settings"),t(function(u){var n=t("./shim");u.exports=async function(i,r){var o=typeof i=="string"?i:await n.stringify(i),f=await n.subtle.digest({name:r||"SHA-256"},new n.TextEncoder().encode(o));return n.Buffer.from(f)}})(t,"./sha256"),t(function(u){const n=t("./shim"),i=n.subtle,r=n.ossl?n.ossl:i,o=f=>r.digest({name:"SHA-1"},new ArrayBuffer(f));u.exports=o})(t,"./sha1"),t(function(u){var n=t("./root"),i=t("./shim"),r=t("./settings"),o=t("./sha256"),f;n.work=n.work||(async(s,c,l,p)=>{try{var y=(c||{}).epub||c;if(p=p||{},y instanceof Function&&(l=y,y=f),s=typeof s=="string"?s:await i.stringify(s),(p.name||"").toLowerCase().slice(0,3)==="sha"){var m=i.Buffer.from(await o(s,p.name),"binary").toString(p.encode||"base64");if(l)try{l(m)}catch(v){console.log(v)}return m}y=y||i.random(9);var h=await(i.ossl||i.subtle).importKey("raw",new i.TextEncoder().encode(s),{name:p.name||"PBKDF2"},!1,["deriveBits"]),b=await(i.ossl||i.subtle).deriveBits({name:p.name||"PBKDF2",iterations:p.iterations||r.pbkdf2.iter,salt:new i.TextEncoder().encode(p.salt||y),hash:p.hash||r.pbkdf2.hash},h,p.length||r.pbkdf2.ks*8);s=i.random(s.length);var T=i.Buffer.from(b,"binary").toString(p.encode||"base64");if(l)try{l(T)}catch(v){console.log(v)}return T}catch(v){if(console.log(v),n.err=v,n.throw)throw v;l&&l();return}}),u.exports=n.work})(t,"./work"),t(function(u){var n=t("./root"),i=t("./shim");t("./settings"),n.name=n.name||(async(r,o)=>{try{if(r)try{r()}catch(f){console.log(f)}return}catch(f){if(console.log(f),n.err=f,n.throw)throw f;r&&r();return}}),n.pair=n.pair||(async(r,o)=>{try{var f=i.ossl||i.subtle,s=await i.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!0,["sign","verify"]).then(async p=>{var y={};y.priv=(await i.subtle.exportKey("jwk",p.privateKey)).d;var m=await i.subtle.exportKey("jwk",p.publicKey);return y.pub=m.x+"."+m.y,y});try{var c=await f.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]).then(async p=>{var y={};y.epriv=(await f.exportKey("jwk",p.privateKey)).d;var m=await f.exportKey("jwk",p.publicKey);return y.epub=m.x+"."+m.y,y})}catch(p){if(n.window)throw p;if(p=="Error: ECDH is not a supported algorithm")console.log("Ignoring ECDH...");else throw p}c=c||{};var l={pub:s.pub,priv:s.priv,epub:c.epub,epriv:c.epriv};if(r)try{r(l)}catch(p){console.log(p)}return l}catch(p){if(console.log(p),n.err=p,n.throw)throw p;r&&r();return}}),u.exports=n.pair})(t,"./pair"),t(function(u){var n=t("./root"),i=t("./shim"),r=t("./settings"),o=t("./sha256"),f;n.sign=n.sign||(async(s,c,l,p)=>{try{if(p=p||{},!(c||p).priv){if(!n.I)throw"No signing key.";c=await n.I(null,{what:s,how:"sign",why:p.why})}if(f===s)throw"`undefined` not allowed.";var y=await r.parse(s),m=p.check=p.check||y;if(n.verify&&(n.opt.check(m)||m&&m.s&&m.m)&&f!==await n.verify(m,c)){var g=await r.parse(m);if(p.raw||(g="SEA"+await i.stringify(g)),l)try{l(g)}catch(A){console.log(A)}return g}var h=c.pub,b=c.priv,T=r.jwk(h,b),v=await o(y),d=await(i.ossl||i.subtle).importKey("jwk",T,{name:"ECDSA",namedCurve:"P-256"},!1,["sign"]).then(S=>(i.ossl||i.subtle).sign({name:"ECDSA",hash:{name:"SHA-256"}},S,new Uint8Array(v))),g={m:y,s:i.Buffer.from(d,"binary").toString(p.encode||"base64")};if(p.raw||(g="SEA"+await i.stringify(g)),l)try{l(g)}catch(S){console.log(S)}return g}catch(S){if(console.log(S),n.err=S,n.throw)throw S;l&&l();return}}),u.exports=n.sign})(t,"./sign"),t(function(u){var n=t("./root"),i=t("./shim"),r=t("./settings"),o=t("./sha256"),f;n.verify=n.verify||(async(l,p,y,m)=>{try{var h=await r.parse(l);if(p===!1){var b=await r.parse(h.m);if(y)try{y(b)}catch(E){console.log(E)}return b}m=m||{};var T=p.pub||p,v=n.opt.slow_leak?await n.opt.slow_leak(T):await(i.ossl||i.subtle).importKey("jwk",r.jwk(T),{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),d=await o(h.m),g,S,A,j;try{if(g=i.Buffer.from(h.s,m.encode||"base64"),S=new Uint8Array(g),A=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},v,S,new Uint8Array(d)),!A)throw"Signature did not match."}catch{if(n.opt.fallback)return await n.opt.fall_verify(l,p,y,m)}var C=A?await r.parse(h.m):f;if(y)try{y(C)}catch(E){console.log(E)}return C}catch(E){if(console.log(E),n.err=E,n.throw)throw E;y&&y();return}}),u.exports=n.verify;var s={};n.opt.slow_leak=l=>{if(s[l])return s[l];var p=r.jwk(l);return s[l]=(i.ossl||i.subtle).importKey("jwk",p,{name:"ECDSA",namedCurve:"P-256"},!1,["verify"]),s[l]};var c=n.opt;n.opt.fall_verify=async function(l,p,y,m,h){if(h===n.opt.fallback)throw"Signature did not match";h=h||1;var b=l||"";l=n.opt.unpack(l)||l;var T=await r.parse(l),v=p.pub||p,d=await n.opt.slow_leak(v),g=h<=n.opt.fallback?i.Buffer.from(await i.subtle.digest({name:"SHA-256"},new i.TextEncoder().encode(await r.parse(T.m)))):await o(T.m),S,A,j;try{if(S=i.Buffer.from(T.s,m.encode||"base64"),A=new Uint8Array(S),j=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},d,A,new Uint8Array(g)),!j)throw"Signature did not match."}catch{try{S=i.Buffer.from(T.s,"utf8"),A=new Uint8Array(S),j=await(i.ossl||i.subtle).verify({name:"ECDSA",hash:{name:"SHA-256"}},d,A,new Uint8Array(g))}catch{if(!j)throw"Signature did not match."}}var C=j?await r.parse(T.m):f;if(c.fall_soul=b["#"],c.fall_key=b["."],c.fall_val=l,c.fall_state=b[">"],y)try{y(C)}catch(E){console.log(E)}return C},n.opt.fallback=2})(t,"./verify"),t(function(u){var n=t("./shim"),i=t("./settings"),r=t("./sha256");const o=async(f,s,c)=>{const l=f+(s||n.random(8)).toString("utf8"),p=n.Buffer.from(await r(l),"binary"),y=i.keyToJwk(p);return await n.subtle.importKey("jwk",y,{name:"AES-GCM"},!1,["encrypt","decrypt"])};u.exports=o})(t,"./aeskey"),t(function(u){var n=t("./root"),i=t("./shim");t("./settings");var r=t("./aeskey"),o;n.encrypt=n.encrypt||(async(f,s,c,l)=>{try{l=l||{};var p=(s||l).epriv||s;if(o===f)throw"`undefined` not allowed.";if(!p){if(!n.I)throw"No encryption key.";s=await n.I(null,{what:f,how:"encrypt",why:l.why}),p=s.epriv||s}var y=typeof f=="string"?f:await i.stringify(f),m={s:i.random(9),iv:i.random(15)},h=await r(p,m.s,l).then(T=>i.subtle.encrypt({name:l.name||"AES-GCM",iv:new Uint8Array(m.iv)},T,new i.TextEncoder().encode(y))),b={ct:i.Buffer.from(h,"binary").toString(l.encode||"base64"),iv:m.iv.toString(l.encode||"base64"),s:m.s.toString(l.encode||"base64")};if(l.raw||(b="SEA"+await i.stringify(b)),c)try{c(b)}catch(T){console.log(T)}return b}catch(T){if(console.log(T),n.err=T,n.throw)throw T;c&&c();return}}),u.exports=n.encrypt})(t,"./encrypt"),t(function(u){var n=t("./root"),i=t("./shim"),r=t("./settings"),o=t("./aeskey");n.decrypt=n.decrypt||(async(f,s,c,l)=>{try{l=l||{};var p=(s||l).epriv||s;if(!p){if(!n.I)throw"No decryption key.";s=await n.I(null,{what:f,how:"decrypt",why:l.why}),p=s.epriv||s}var y=await r.parse(f),m,h,b;try{m=i.Buffer.from(y.s,l.encode||"base64"),h=i.Buffer.from(y.iv,l.encode||"base64"),b=i.Buffer.from(y.ct,l.encode||"base64");var T=await o(p,m,l).then(d=>i.subtle.decrypt({name:l.name||"AES-GCM",iv:new Uint8Array(h),tagLength:128},d,new Uint8Array(b)))}catch{if(l.encode==="utf8")throw"Could not decrypt";if(n.opt.fallback)return l.encode="utf8",await n.decrypt(f,s,c,l)}var v=await r.parse(new i.TextDecoder("utf8").decode(T));if(c)try{c(v)}catch(d){console.log(d)}return v}catch(d){if(console.log(d),n.err=d,n.throw)throw d;c&&c();return}}),u.exports=n.decrypt})(t,"./decrypt"),t(function(u){var n=t("./root"),i=t("./shim");t("./settings"),n.secret=n.secret||(async(o,f,s,c)=>{try{if(c=c||{},!f||!f.epriv||!f.epub){if(!n.I)throw"No secret mix.";f=await n.I(null,{what:o,how:"secret",why:c.why})}var l=o.epub||o,p=f.epub,y=f.epriv,m=i.ossl||i.subtle,h=r(l),b=Object.assign({public:await m.importKey(...h,!0,[])},{name:"ECDH",namedCurve:"P-256"}),T=r(p,y),v=await m.importKey(...T,!1,["deriveBits"]).then(async g=>{var S=await m.deriveBits(b,g,256),A=new Uint8Array(S),j=await m.importKey("raw",A,{name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);return m.exportKey("jwk",j).then(({k:C})=>C)}),d=v;if(s)try{s(d)}catch(g){console.log(g)}return d}catch(g){if(console.log(g),n.err=g,n.throw)throw g;s&&s();return}});var r=(o,f)=>{var[s,c]=o.split("."),l=f?{d:f}:{};return["jwk",Object.assign(l,{x:s,y:c,kty:"EC",crv:"P-256",ext:!0}),{name:"ECDH",namedCurve:"P-256"}]};u.exports=n.secret})(t,"./secret"),t(function(u){var n=t("./root");n.certify=n.certify||(async(i,r={},o,f,s={})=>{try{if(console.log("SEA.certify() is an early experimental community supported method that may change API behavior without warning in any future version."),i=(()=>{var d=[];if(i){if((typeof i=="string"||Array.isArray(i))&&i.indexOf("*")>-1)return"*";if(typeof i=="string")return i;if(Array.isArray(i)){if(i.length===1&&i[0])return typeof i[0]=="object"&&i[0].pub?i[0].pub:typeof i[0]=="string"?i[0]:null;i.map(g=>{typeof g=="string"?d.push(g):typeof g=="object"&&g.pub&&d.push(g.pub)})}return typeof i=="object"&&i.pub?i.pub:d.length>0?d:null}})(),!i)return console.log("No certificant found.");const l=s.expiry&&(typeof s.expiry=="number"||typeof s.expiry=="string")?parseFloat(s.expiry):null,p=(r||{}).read?r.read:null,y=(r||{}).write?r.write:typeof r=="string"||Array.isArray(r)||r["+"]||r["#"]||r["."]||r["="]||r["*"]||r[">"]||r["<"]?r:null,m=(s||{}).block||(s||{}).blacklist||(s||{}).ban||{},h=m.read&&(typeof m.read=="string"||(m.read||{})["#"])?m.read:null,b=typeof m=="string"?m:m.write&&(typeof m.write=="string"||m.write["#"])?m.write:null;if(!p&&!y)return console.log("No policy found.");const T=JSON.stringify(kt(kt(kt(kt(kt({c:i},l?{e:l}:{}),p?{r:p}:{}),y?{w:y}:{}),h?{rb:h}:{}),b?{wb:b}:{}));var c=await n.sign(T,o,null,{raw:1});if(s.raw||(c="SEA"+JSON.stringify(c)),f)try{f(c)}catch(d){console.log(d)}return c}catch(l){if(n.err=l,n.throw)throw l;f&&f();return}}),u.exports=n.certify})(t,"./certify"),t(function(u){var n=t("./shim"),i=t("./root");i.work=t("./work"),i.sign=t("./sign"),i.verify=t("./verify"),i.encrypt=t("./encrypt"),i.decrypt=t("./decrypt"),i.certify=t("./certify"),i.random=i.random||n.random,i.Buffer=i.Buffer||t("./buffer"),i.keyid=i.keyid||(async r=>{try{const o=n.Buffer.concat(r.replace(/-/g,"+").replace(/_/g,"/").split(".").map(l=>n.Buffer.from(l,"base64"))),f=n.Buffer.concat([n.Buffer.from([153,o.length/256,o.length%256]),o]),s=await sha1hash(f),c=n.Buffer.from(s,"binary");return c.toString("hex",c.length-8)}catch(o){throw console.log(o),o}}),((i.window||{}).GUN||{}).SEA=i,u.exports=i})(t,"./sea"),t(function(u){var n=t("./sea"),i,r;n.window?i=n.window.GUN||{chain:{}}:i=t((r+""==typeof a?".":"")+"./gun",1),n.GUN=i;function o(s){this._={$:this}}o.prototype=function(){function s(){}return s.prototype=i.chain,new s}(),o.prototype.constructor=o,i.chain.user=function(s){var c=this,l=c.back(-1),p;if(s)return s=n.opt.pub((s._||"")["#"])||s,l.get("~"+s);if(p=l.back("user"))return p;var l=l._,y=l,m=y.opt.uuid||f;return(y=(p=y.user=c.chain(new o))._).opt={},y.opt.uuid=function(h){var b=m(),T=l.user;return!T||!(T=T.is)||!(T=T.pub)||(b="~"+T+"/"+b,h&&h.call&&h(null,b)),b},p};function f(){return i.state().toString(36).replace(".","")}i.User=o,o.GUN=i,o.SEA=i.SEA=n,u.exports=o})(t,"./user"),t(function(u){var n,i=""+n!=typeof window?window.Gun||{chain:{}}:t((""+n==typeof a?".":"")+"./gun",1);i.chain.then=function(r,o){var f=this,s=new Promise(function(c,l){f.once(c,o)});return r?s.then(r):s}})(t,"./then"),t(function(u){var n=t("./user"),i=n.SEA,r=n.GUN,o=function(){};n.prototype.create=function(...f){var s=typeof f[0]=="object"&&(f[0].pub||f[0].epub)?f[0]:typeof f[1]=="object"&&(f[1].pub||f[1].epub)?f[1]:null,c=s&&(s.pub||s.epub)?s.pub:typeof f[0]=="string"?f[0]:null,l=s&&(s.pub||s.epub)?s:c&&typeof f[1]=="string"?f[1]:null,p=f.filter(d=>typeof d=="function")[0]||null,y=f&&f.length>1&&typeof f[f.length-1]=="object"?f[f.length-1]:{},m=this,h=m._,b=m.back(-1);if(p=p||o,y=y||{},y.check!==!1){var T;if(c||(T="No user."),(l||"").length<8&&(T="Password too short!"),T)return p({err:r.log(T)}),m}if(h.ing)return(p||o)({err:r.log("User is already being created or authenticated!"),wait:!0}),m;h.ing=!0;var v={};return v.a=function(d){if(v.pubs=d,d&&!y.already){var g={err:r.log("User already created!")};h.ing=!1,(p||o)(g),m.leave();return}v.salt=String.random(64),i.work(l,v.salt,v.b)},v.b=function(d){v.proof=d,s?v.c(s):i.pair(v.c)},v.c=function(d){var g;v.pair=d||{},(g=h.root.user)&&(g._.sea=d,g.is={pub:d.pub,epub:d.epub,alias:c}),v.data={pub:d.pub},v.d()},v.d=function(){v.data.alias=c,v.e()},v.e=function(){v.data.epub=v.pair.epub,i.encrypt({priv:v.pair.priv,epriv:v.pair.epriv},v.proof,v.f,{raw:1})},v.f=function(d){v.data.auth=JSON.stringify({ek:d,s:v.salt}),v.g(v.data.auth)},v.g=function(d){var g;v.data.auth=v.data.auth||d,b.get(g="~"+v.pair.pub).put(v.data).on(v.h);var S={};S[g]={"#":g},b.get("~@"+c).put(S).get(g).on(v.i)},v.h=function(d,g,S,A){A.off(),v.h.ok=1,v.i()},v.i=function(d,g,S,A){A&&(v.i.ok=1,A.off()),!(!v.h.ok||!v.i.ok)&&(h.ing=!1,p({ok:0,pub:v.pair.pub}),o===p&&(s?m.auth(s):m.auth(c,l)))},b.get("~@"+c).once(v.a),m},n.prototype.leave=function(f,s){var c=this,l=c.back(-1)._.user;if(l&&(delete l.is,delete l._.is,delete l._.sea),i.window)try{var p={};p=window.sessionStorage,delete p.recall,delete p.pair}catch{}return c}})(t,"./create"),t(function(u){var n=t("./user"),i=n.SEA,r=n.GUN,o=function(){};n.prototype.auth=function(...s){var c=typeof s[0]=="object"&&(s[0].pub||s[0].epub)?s[0]:typeof s[1]=="object"&&(s[1].pub||s[1].epub)?s[1]:null,l=!c&&typeof s[0]=="string"?s[0]:null,p=l&&typeof s[1]=="string"?s[1]:null,y=s.filter(g=>typeof g=="function")[0]||null,m=s&&s.length>1&&typeof s[s.length-1]=="object"?s[s.length-1]:{},h=this,b=h._,T=h.back(-1);if(b.ing)return(y||o)({err:r.log("User is already being created or authenticated!"),wait:!0}),h;b.ing=!0;var v={},d;return v.a=function(g){if(!g)return v.b();if(!g.pub){var S=[];return Object.keys(g).forEach(function(A){A!="_"&&S.push(g[A])}),v.b(S)}if(v.name)return v.f(g);v.c((v.data=g).auth)},v.b=function(g){var S=(v.list=(v.list||[]).concat(g||[])).shift();if(d===S)return v.name?v.err("Your user account is not published for dApps to access, please consider syncing it online, or allowing local access by adding your device as a peer."):v.err("Wrong user or password.");T.get(S).once(v.a)},v.c=function(g){if(d===g)return v.b();if(typeof g=="string")return v.c(f(g));i.work(p,(v.auth=g).s,v.d,v.enc)},v.d=function(g){i.decrypt(v.auth.ek,g,v.e,v.enc)},v.e=function(g){if(d===g)return v.enc?(v.enc=null,v.b()):(v.enc={encode:"utf8"},v.c(v.auth));v.half=g,v.f(v.data)},v.f=function(g){var S=v.half||{},A=v.data||{};v.g(v.lol={pub:g.pub||A.pub,epub:g.epub||A.epub,priv:g.priv||S.priv,epriv:g.epriv||S.epriv})},v.g=function(g){if(!g||!g.pub||!g.epub)return v.b();v.pair=g;var S=T._.user,A=S._;A.tag;var j=A.opt;A=S._=T.get("~"+g.pub)._,A.opt=j,S.is={pub:g.pub,epub:g.epub,alias:l||g.pub},A.sea=v.pair,b.ing=!1;try{p&&d==(f(b.root.graph["~"+g.pub].auth)||"")[":"]&&(m.shuffle=m.change=p)}catch{}if(m.change?v.z():(y||o)(A),i.window&&(h.back("user")._.opt||m).remember)try{var C={};C=window.sessionStorage,C.recall=!0,C.pair=JSON.stringify(g)}catch{}try{T._.tag.auth?T._.on("auth",A):setTimeout(function(){T._.on("auth",A)},1)}catch(E){r.log("Your 'auth' callback crashed with:",E)}},v.z=function(){v.salt=String.random(64),i.work(m.change,v.salt,v.y)},v.y=function(g){i.encrypt({priv:v.pair.priv,epriv:v.pair.epriv},g,v.x,{raw:1})},v.x=function(g){v.w(JSON.stringify({ek:g,s:v.salt}))},v.w=function(g){if(m.shuffle){console.log("migrate core account from UTF8 & shuffle");var S={};Object.keys(v.data).forEach(function(A){S[A]=v.data[A]}),delete S._,S.auth=g,T.get("~"+v.pair.pub).put(S)}T.get("~"+v.pair.pub).get("auth").put(g,y||o)},v.err=function(g){var S={err:r.log(g||"User cannot be found!")};b.ing=!1,(y||o)(S)},v.plugin=function(g){if(!(v.name=g))return v.err();var S=[g];g[0]!=="~"&&(S[1]="~"+g,S[2]="~@"+g),v.b(S)},c?v.g(c):l?T.get("~@"+l).once(v.a):!l&&!p&&i.name(v.plugin),h};function f(s){if(typeof s!="string")return s;try{s=JSON.parse(s)}catch{s={}}return s}})(t,"./auth"),t(function(u){var n=t("./user"),i=n.SEA;n.GUN,n.prototype.recall=function(r,o){var f=this,s=f.back(-1);if(r=r||{},r&&r.sessionStorage){if(i.window)try{var c={};c=window.sessionStorage,c&&(s._.opt.remember=!0,(f.back("user")._.opt||r).remember=!0,(c.recall||c.pair)&&s.user().auth(JSON.parse(c.pair),o))}catch{}return f}return f}})(t,"./recall"),t(function(u){var n=t("./user"),i=n.SEA,r=n.GUN,o=function(){};n.prototype.pair=function(){var f=this,s;try{s=new Proxy({DANGER:"\u2620"},{get:function(c,l,p){if(!(!f.is||!(f._||"").sea))return f._.sea[l]}})}catch{}return s},n.prototype.delete=async function(f,s,c){console.log("user.delete() IS DEPRECATED AND WILL BE MOVED TO A MODULE!!!");var l=this;l.back(-1);var p=l.back("user");try{p.auth(f,s,function(y){var m=(p.is||{}).pub;p.map().once(function(){this.put(null)}),p.leave(),(c||o)({ok:0})})}catch(y){r.log("User.delete failed! Error:",y)}return l},n.prototype.alive=async function(){console.log("user.alive() IS DEPRECATED!!!");const f=this.back(-1);try{return await authRecall(f),f._.user._}catch{const c="No session!";throw r.log(c),{err:c}}},n.prototype.trust=async function(f){console.log("`.trust` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!"),r.is(f)&&f.get("pub").get((s,c)=>{console.log(s,c)}),f.get("trust").get(path).put(theirPubkey)},n.prototype.grant=function(f,s){console.log("`.grant` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var c=this,l=c.back(-1).user(),p=l._.sea,y="";return c.back(function(m){m.is||(y+=m.get||"")}),async function(){var m,h=await l.get("grant").get(p.pub).get(y).then();h=await i.decrypt(h,p),h||(h=i.random(16).toString(),m=await i.encrypt(h,p),l.get("grant").get(p.pub).get(y).put(m));var b=f.get("pub").then(),T=f.get("epub").then();b=await b,T=await T;var v=await i.secret(T,p);m=await i.encrypt(h,v),l.get("grant").get(b).get(y).put(m,s)}(),c},n.prototype.secret=function(f,s){console.log("`.secret` API MAY BE DELETED OR CHANGED OR RENAMED, DO NOT USE!");var c=this,l=c.back(-1).user(),p=l.pair(),y="";return c.back(function(m){m.is||(y+=m.get||"")}),async function(){var m,h=await l.get("trust").get(p.pub).get(y).then();h=await i.decrypt(h,p),h||(h=i.random(16).toString(),m=await i.encrypt(h,p),l.get("trust").get(p.pub).get(y).put(m)),m=await i.encrypt(f,h),c.put(m,s)}(),c},u.exports=n})(t,"./share"),t(function(u){var n=t("./sea"),i=t("./settings"),r=function(){},o,f=""+o!=typeof window?window.Gun||{on:r}:t((""+o==typeof a?".":"")+"./gun",1);f.on("opt",function(h){h.sea||(h.sea={own:{}},h.on("put",s,h)),this.to.next(h)});function s(h){var b=this,T=b.as,v=h.put,d=v["#"],g=v["."],S=v[":"],A=v[">"],j=h["#"],C;if(!(!d||!g)){if((h._||"").faith&&(T.opt||"").faith&&typeof h._=="function"){n.opt.pack(v,function(D){n.verify(D,!1,function(B){v["="]=n.opt.unpack(B),b.to.next(h)})});return}var E=function(D){T.on("in",{"@":j,err:h.err=D})};if((h._||"").DBG&&((h._||"").DBG.c=+new Date),0<=d.indexOf("<?")&&(C=parseFloat(d.split("<?")[1]||""),C&&A<f.state()-C*1e3)){(C=h._)&&C.stun&&C.stun--;return}if(d==="~@"){s.alias(b,h,S,g,d,T,E);return}if(d.slice(0,2)==="~@"){s.pubs(b,h,S,g,d,T,E);return}if(C=n.opt.pub(d)){s.pub(b,h,S,g,d,T,E,T.user||"",C);return}if(0<=d.indexOf("#")){s.hash(b,h,S,g,d,T,E);return}s.any(b,h,S,g,d,T,E,T.user||"")}}s.hash=function(h,b,T,v,d,g,S){n.work(T,null,function(A){if(A&&A===v.split("#").slice(-1)[0])return h.to.next(b);S("Data hash not same as hash!")},{name:"SHA-256"})},s.alias=function(h,b,T,v,d,g,S){if(!T)return S("Data must exist!");if("~@"+v===l(T))return h.to.next(b);S("Alias not same!")},s.pubs=function(h,b,T,v,d,g,S){if(!T)return S("Alias must exist!");if(v===l(T))return h.to.next(b);S("Alias not same!")},s.pub=async function(h,b,T,v,d,g,S,A,j){var C;const E=await i.parse(T)||{},D=(B,k,w)=>{if(B.m&&B.s&&k&&j)return n.verify(B,j,_=>{if(o!==_&&o!==_.e&&b.put[">"]&&b.put[">"]>parseFloat(_.e))return S("Certificate expired.");if(o!==_&&_.c&&_.w&&(_.c===k||_.c.indexOf("*")>-1)){let $=d.indexOf("/")>-1?d.replace(d.substring(0,d.indexOf("/")+1),""):"";String.match=String.match||f.text.match;const O=Array.isArray(_.w)?_.w:typeof _.w=="object"||typeof _.w=="string"?[_.w]:[];for(const M of O)if(String.match($,M["#"])&&String.match(v,M["."])||!M["."]&&String.match($,M["#"])||!M["#"]&&String.match(v,M["."])||String.match($?$+"/"+v:v,M["#"]||M)){if(M["+"]&&M["+"].indexOf("*")>-1&&$&&$.indexOf(k)==-1&&v.indexOf(k)==-1)return S(`Path "${$}" or key "${v}" must contain string "${k}".`);if(_.wb&&(typeof _.wb=="string"||(_.wb||{})["#"])){var x=h.as.root.$.back(-1);return typeof _.wb=="string"&&_.wb.slice(0,1)!=="~"&&(x=x.get("~"+j)),x.get(_.wb).get(k).once(N=>N&&(N===1||N===!0)?S(`Certificant ${k} blocked.`):w(_))}return w(_)}return S("Certificate verification fail.")}})};if(v==="pub"&&"~"+j===d)return T===j?h.to.next(b):S("Account not same!");if((C=A.is)&&C.pub&&!E["*"]&&!E["+"]&&(j===C.pub||j!==C.pub&&((b._.msg||{}).opt||{}).cert)){n.opt.pack(b.put,B=>{n.sign(B,A._.sea,async function(k){if(o===k)return S(n.err||"Signature fail.");if(b.put[":"]={":":C=n.opt.unpack(k.m),"~":k.s},b.put["="]=C,j===A.is.pub){(C=l(T))&&((g.sea.own[C]=g.sea.own[C]||{})[j]=1),JSON.stringifyAsync(b.put[":"],function(w,_){return w?S(w||"Stringify error."):(b.put[":"]=_,h.to.next(b))});return}if(j!==A.is.pub&&((b._.msg||{}).opt||{}).cert){const w=await i.parse(b._.msg.opt.cert);w&&w.m&&w.s&&D(w,A.is.pub,_=>{b.put[":"]["+"]=w,b.put[":"]["*"]=A.is.pub,JSON.stringifyAsync(b.put[":"],function(x,$){return x?S(x||"Stringify error."):(b.put[":"]=$,h.to.next(b))})})}},{raw:1})});return}n.opt.pack(b.put,B=>{n.verify(B,E["*"]||j,function(k){var w;if(k=n.opt.unpack(k),o===k)return S("Unverified data.");if((w=l(k))&&j===n.opt.pub(w)&&((g.sea.own[w]=g.sea.own[w]||{})[j]=1),E["+"]&&E["+"].m&&E["+"].s&&E["*"])D(E["+"],E["*"],_=>(b.put["="]=k,h.to.next(b)));else return b.put["="]=k,h.to.next(b)})})},s.any=function(h,b,T,v,d,g,S,A){if(g.opt.secure)return S("Soul missing public key at '"+v+"'.");g.on("secure",function(j){if(this.off(),!g.opt.secure)return h.to.next(j);S("Data cannot be changed.")}).on.on("secure",b)};var c=f.valid,l=function(h,b){return typeof(b=c(h))=="string"&&b};(f.state||"").ify;var p=/[^\w_-]/;n.opt.pub=function(h){if(!!h&&(h=h.split("~"),!(!h||!(h=h[1]))&&(h=h.split(p).slice(0,2),!(!h||h.length!=2)&&(h[0]||"")[0]!=="@")))return h=h.slice(0,2).join("."),h},n.opt.stringy=function(h){},n.opt.pack=function(h,b,T,v,d){var g,S;if(n.opt.check(h))return b(h);h&&h["#"]&&h["."]&&h[">"]&&(g=h[":"],S=1),JSON.parseAsync(S?g:h,function(A,j){var C=o!==(j||"")[":"]&&(j||"")["~"];if(!C){b(h);return}b({m:{"#":d||h["#"],".":T||h["."],":":(j||"")[":"],">":h[">"]||f.state.is(v,T)},s:C})})};var y=n.opt;n.opt.unpack=function(h,b,T){var v;if(o!==h){if(h&&o!==(v=h[":"]))return v;if(b=b||y.fall_key,!T&&y.fall_val&&(T={},T[b]=y.fall_val),!(!b||!T)){if(h===T[b]||!n.opt.check(T[b]))return h;var d=T&&T._&&T._["#"]||y.fall_soul,g=f.state.is(T,b)||y.fall_state;if(h&&h.length===4&&d===h[0]&&b===h[1]&&m(g)===m(h[3]))return h[2];if(g<n.opt.shuffle_attack)return h}}},n.opt.shuffle_attack=15463296e5;var m=Math.floor})(t,"./index")})()})(jn);function Cn(e,t,a){return{formatter:te([e,t],([n,i])=>{const r=n&&n.format(a.format),o=a.isRangePicker&&i&&i.format(a.format);return{formattedSelected:r,formattedSelectedEnd:o,formattedCombined:a.isRangePicker?`${r} - ${o}`:r}})}}var Te={exports:{}};(function(e,t){(function(a,u){e.exports=u()})(vt,function(){var a=1e3,u=6e4,n=36e5,i="millisecond",r="second",o="minute",f="hour",s="day",c="week",l="month",p="quarter",y="year",m="date",h="Invalid Date",b=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,T=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(w,_,x){var $=String(w);return!$||$.length>=_?w:""+Array(_+1-$.length).join(x)+w},g={s:d,z:function(w){var _=-w.utcOffset(),x=Math.abs(_),$=Math.floor(x/60),O=x%60;return(_<=0?"+":"-")+d($,2,"0")+":"+d(O,2,"0")},m:function w(_,x){if(_.date()<x.date())return-w(x,_);var $=12*(x.year()-_.year())+(x.month()-_.month()),O=_.clone().add($,l),M=x-O<0,N=_.clone().add($+(M?-1:1),l);return+(-($+(x-O)/(M?O-N:N-O))||0)},a:function(w){return w<0?Math.ceil(w)||0:Math.floor(w)},p:function(w){return{M:l,y,w:c,d:s,D:m,h:f,m:o,s:r,ms:i,Q:p}[w]||String(w||"").toLowerCase().replace(/s$/,"")},u:function(w){return w===void 0}},S="en",A={};A[S]=v;var j=function(w){return w instanceof B},C=function(w,_,x){var $;if(!w)return S;if(typeof w=="string")A[w]&&($=w),_&&(A[w]=_,$=w);else{var O=w.name;A[O]=w,$=O}return!x&&$&&(S=$),$||!x&&S},E=function(w,_){if(j(w))return w.clone();var x=typeof _=="object"?_:{};return x.date=w,x.args=arguments,new B(x)},D=g;D.l=C,D.i=j,D.w=function(w,_){return E(w,{locale:_.$L,utc:_.$u,x:_.$x,$offset:_.$offset})};var B=function(){function w(x){this.$L=C(x.locale,null,!0),this.parse(x)}var _=w.prototype;return _.parse=function(x){this.$d=function($){var O=$.date,M=$.utc;if(O===null)return new Date(NaN);if(D.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var N=O.match(b);if(N){var P=N[2]-1||0,I=(N[7]||"0").substring(0,3);return M?new Date(Date.UTC(N[1],P,N[3]||1,N[4]||0,N[5]||0,N[6]||0,I)):new Date(N[1],P,N[3]||1,N[4]||0,N[5]||0,N[6]||0,I)}}return new Date(O)}(x),this.$x=x.x||{},this.init()},_.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},_.$utils=function(){return D},_.isValid=function(){return this.$d.toString()!==h},_.isSame=function(x,$){var O=E(x);return this.startOf($)<=O&&O<=this.endOf($)},_.isAfter=function(x,$){return E(x)<this.startOf($)},_.isBefore=function(x,$){return this.endOf($)<E(x)},_.$g=function(x,$,O){return D.u(x)?this[$]:this.set(O,x)},_.unix=function(){return Math.floor(this.valueOf()/1e3)},_.valueOf=function(){return this.$d.getTime()},_.startOf=function(x,$){var O=this,M=!!D.u($)||$,N=D.p(x),P=function(nt,q){var st=D.w(O.$u?Date.UTC(O.$y,q,nt):new Date(O.$y,q,nt),O);return M?st:st.endOf(s)},I=function(nt,q){return D.w(O.toDate()[nt].apply(O.toDate("s"),(M?[0,0,0,0]:[23,59,59,999]).slice(q)),O)},K=this.$W,U=this.$M,V=this.$D,L="set"+(this.$u?"UTC":"");switch(N){case y:return M?P(1,0):P(31,11);case l:return M?P(1,U):P(0,U+1);case c:var ft=this.$locale().weekStart||0,ht=(K<ft?K+7:K)-ft;return P(M?V-ht:V+(6-ht),U);case s:case m:return I(L+"Hours",0);case f:return I(L+"Minutes",1);case o:return I(L+"Seconds",2);case r:return I(L+"Milliseconds",3);default:return this.clone()}},_.endOf=function(x){return this.startOf(x,!1)},_.$set=function(x,$){var O,M=D.p(x),N="set"+(this.$u?"UTC":""),P=(O={},O[s]=N+"Date",O[m]=N+"Date",O[l]=N+"Month",O[y]=N+"FullYear",O[f]=N+"Hours",O[o]=N+"Minutes",O[r]=N+"Seconds",O[i]=N+"Milliseconds",O)[M],I=M===s?this.$D+($-this.$W):$;if(M===l||M===y){var K=this.clone().set(m,1);K.$d[P](I),K.init(),this.$d=K.set(m,Math.min(this.$D,K.daysInMonth())).$d}else P&&this.$d[P](I);return this.init(),this},_.set=function(x,$){return this.clone().$set(x,$)},_.get=function(x){return this[D.p(x)]()},_.add=function(x,$){var O,M=this;x=Number(x);var N=D.p($),P=function(U){var V=E(M);return D.w(V.date(V.date()+Math.round(U*x)),M)};if(N===l)return this.set(l,this.$M+x);if(N===y)return this.set(y,this.$y+x);if(N===s)return P(1);if(N===c)return P(7);var I=(O={},O[o]=u,O[f]=n,O[r]=a,O)[N]||1,K=this.$d.getTime()+x*I;return D.w(K,this)},_.subtract=function(x,$){return this.add(-1*x,$)},_.format=function(x){var $=this,O=this.$locale();if(!this.isValid())return O.invalidDate||h;var M=x||"YYYY-MM-DDTHH:mm:ssZ",N=D.z(this),P=this.$H,I=this.$m,K=this.$M,U=O.weekdays,V=O.months,L=function(q,st,Tt,G){return q&&(q[st]||q($,M))||Tt[st].substr(0,G)},ft=function(q){return D.s(P%12||12,q,"0")},ht=O.meridiem||function(q,st,Tt){var G=q<12?"AM":"PM";return Tt?G.toLowerCase():G},nt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:K+1,MM:D.s(K+1,2,"0"),MMM:L(O.monthsShort,K,V,3),MMMM:L(V,K),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:L(O.weekdaysMin,this.$W,U,2),ddd:L(O.weekdaysShort,this.$W,U,3),dddd:U[this.$W],H:String(P),HH:D.s(P,2,"0"),h:ft(1),hh:ft(2),a:ht(P,I,!0),A:ht(P,I,!1),m:String(I),mm:D.s(I,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:N};return M.replace(T,function(q,st){return st||nt[q]||N.replace(":","")})},_.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},_.diff=function(x,$,O){var M,N=D.p($),P=E(x),I=(P.utcOffset()-this.utcOffset())*u,K=this-P,U=D.m(this,P);return U=(M={},M[y]=U/12,M[l]=U,M[p]=U/3,M[c]=(K-I)/6048e5,M[s]=(K-I)/864e5,M[f]=K/n,M[o]=K/u,M[r]=K/a,M)[N]||K,O?U:D.a(U)},_.daysInMonth=function(){return this.endOf(l).$D},_.$locale=function(){return A[this.$L]},_.locale=function(x,$){if(!x)return this.$L;var O=this.clone(),M=C(x,$,!0);return M&&(O.$L=M),O},_.clone=function(){return D.w(this.$d,this)},_.toDate=function(){return new Date(this.valueOf())},_.toJSON=function(){return this.isValid()?this.toISOString():null},_.toISOString=function(){return this.$d.toISOString()},_.toString=function(){return this.$d.toUTCString()},w}(),k=B.prototype;return E.prototype=k,[["$ms",i],["$s",r],["$m",o],["$H",f],["$W",s],["$M",l],["$y",y],["$D",m]].forEach(function(w){k[w[1]]=function(_){return this.$g(_,w[0],w[1])}}),E.extend=function(w,_){return w.$i||(w(_,B,E),w.$i=!0),E},E.locale=C,E.isDayjs=j,E.unix=function(w){return E(1e3*w)},E.en=A[S],E.Ls=A,E.p={},E})})(Te);var W=Te.exports,Ae={exports:{}};(function(e,t){(function(a,u){e.exports=u()})(vt,function(){return function(a,u,n){var i=u.prototype,r=function(l){return l&&(l.indexOf?l:l.s)},o=function(l,p,y,m,h){var b=l.name?l:l.$locale(),T=r(b[p]),v=r(b[y]),d=T||v.map(function(S){return S.substr(0,m)});if(!h)return d;var g=b.weekStart;return d.map(function(S,A){return d[(A+(g||0))%7]})},f=function(){return n.Ls[n.locale()]},s=function(l,p){return l.formats[p]||function(y){return y.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,h,b){return h||b.slice(1)})}(l.formats[p.toUpperCase()])},c=function(){var l=this;return{months:function(p){return p?p.format("MMMM"):o(l,"months")},monthsShort:function(p){return p?p.format("MMM"):o(l,"monthsShort","months",3)},firstDayOfWeek:function(){return l.$locale().weekStart||0},weekdays:function(p){return p?p.format("dddd"):o(l,"weekdays")},weekdaysMin:function(p){return p?p.format("dd"):o(l,"weekdaysMin","weekdays",2)},weekdaysShort:function(p){return p?p.format("ddd"):o(l,"weekdaysShort","weekdays",3)},longDateFormat:function(p){return s(l.$locale(),p)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};i.localeData=function(){return c.bind(this)()},n.localeData=function(){var l=f();return{firstDayOfWeek:function(){return l.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(p){return s(l,p)},meridiem:l.meridiem,ordinal:l.ordinal}},n.months=function(){return o(f(),"months")},n.monthsShort=function(){return o(f(),"monthsShort","months",3)},n.weekdays=function(l){return o(f(),"weekdays",null,null,l)},n.weekdaysShort=function(l){return o(f(),"weekdaysShort","weekdays",3,l)},n.weekdaysMin=function(l){return o(f(),"weekdaysMin","weekdays",2,l)}}})})(Ae);var En=Ae.exports,Oe={exports:{}};(function(e,t){(function(a,u){e.exports=u()})(vt,function(){return function(a,u,n){var i=function(r,o){if(!o||!o.length||!o[0]||o.length===1&&!o[0].length)return null;var f;o.length===1&&o[0].length>0&&(o=o[0]),f=o[0];for(var s=1;s<o.length;s+=1)o[s].isValid()&&!o[s][r](f)||(f=o[s]);return f};n.max=function(){var r=[].slice.call(arguments,0);return i("isAfter",r)},n.min=function(){var r=[].slice.call(arguments,0);return i("isBefore",r)}}})})(Oe);var $n=Oe.exports,je={exports:{}};(function(e,t){(function(a,u){e.exports=u()})(vt,function(){return function(a,u){u.prototype.isSameOrBefore=function(n,i){return this.isSame(n,i)||this.isBefore(n,i)}}})})(je);var Mn=je.exports,Ce={exports:{}};(function(e,t){(function(a,u){e.exports=u()})(vt,function(){return function(a,u){u.prototype.isSameOrAfter=function(n,i){return this.isSame(n,i)||this.isAfter(n,i)}}})})(Ce);var Bn=Ce.exports;W.extend(En);W.extend($n);W.extend(Mn);W.extend(Bn);function Ee(e,t){return e.isSame(t,"month")?t.add(1,"month"):t}function Nn(e,t,a){return u=>{const n=u.isSameOrAfter(e,"day")&&u.isSameOrBefore(t,"day");return{isInRange:n,selectable:n&&(!a||a(u.toDate())),isToday:u.isSame(W(),"day")}}}function Pn(e,t){const a=e.startOf("month").startOf("week"),u=e.endOf("month").endOf("week").add(1,"day"),n=[];let i=a;for(;i.isBefore(u,"day");){const r=Math.floor(i.diff(a,"days")/7),o=i.isSame(e,"month");n[r]=n[r]||{days:[],id:`${i.format("YYYYMMYYYY")}${r}`},n[r].days.push(Object.assign({partOfMonth:o,firstOfMonth:o&&i.date()===1,lastOfMonth:o&&i.date()===e.daysInMonth(),day:i.date(),month:i.month(),year:i.year(),date:i},t(i))),i=i.add(1,"day")}return{month:e.month(),year:e.year(),weeks:n}}function In(e){const{start:t,end:a,selectableCallback:u}=e,n=t.startOf("month").startOf("day"),i=Ee(n,a.startOf("month").startOf("day")),r=[],o=Nn(t,a,u);let f=W(n);for(;f.isSameOrBefore(i);)r.push(Pn(f,o)),f=f.add(1,"month");return r}function $e(e,t,a){return e.valueOf()<t.start.valueOf()||e.valueOf()>t.end.valueOf()?(console.warn("Provided date",e.format(),"is outside specified start-and-end range",t.start.format(),"to",t.end.format()),a?t.start:t.end):e}function Gn(e,t){let a=!1,u;if(t.isRangePicker){const[r,o]=e||[];a=Boolean(r).valueOf()&&Boolean(o).valueOf(),u=a?e.map(W):[W.max(W(),t.start),W.min(W().add(1,"month"),t.end)]}else a=Boolean(e).valueOf(),u=[a?W(e):W.max(W(),t.start)];const[n,i]=u;return{isDateChosen:a,chosen:[$e(n,t,!0),...t.isRangePicker?[$e(i,t,!1)]:[]]}}const ct={};function Kn(e,t){const a=W().startOf("day"),{isDateChosen:u,chosen:[n,i]}=Gn(e,t),r=ut(n),o=ut(i),{formatter:f}=Cn(r,o,t),s=ut("date-view"),c=n.startOf("month"),l=t.isRangePicker?Ee(n,i).startOf("month"):null;return{months:In(t),component:s,today:a,selectedStartDate:r,selectedEndDate:o,leftCalendarDate:ut(c),rightCalendarDate:ut(l),config:t,shouldShakeDate:ut(!1),isOpen:ut(!1),isClosing:ut(!1),highlighted:ut(a),formatter:f,isDateChosen:ut(u),resetView:()=>{s.set("date-view")},isSelectingFirstDate:ut(!0)}}function Rn(e){const t=[...e.document.body.children].reduce((a,u)=>Math.max(a,u.getBoundingClientRect().right),0)-e.document.body.getBoundingClientRect().x;return{pageWidth:Math.min(e.document.body.scrollWidth,t),pageHeight:e.document.body.scrollHeight,viewportHeight:e.innerHeight,viewportWidth:e.innerWidth}}const Me={page:{padding:6,deadzone:80},content:{medium:{single:{height:410,width:340},range:{height:410,width:680}},small:{single:{height:410,width:340},range:{height:786,width:340}}}};function Hn(e,t,a){const{isRangePicker:u}=a,{pageWidth:n,viewportHeight:i,viewportWidth:r}=Rn(e),o=n<480?"small":"medium",f=u?"range":"single",{padding:s,deadzone:c}=Me.page,{width:l,height:p}=Me.content[o][f];if(i<p+s+c||r<l+s)return{fullscreen:!0,top:0,left:0};let y=Math.max(s,t.pageX-l/2);y+l>n&&(y=n-l-s);let m=Math.max(s,t.pageY-p/2);return m+p>i&&(m=i-p-s),{top:m,left:y}}const Un=(e,t,a)=>{if(!e)return;function u(){a.apply(this,arguments),e.removeEventListener(t,u)}e.addEventListener(t,u)};const{window:Be}=Sn,Yn=e=>({}),Ne=e=>({}),Jn=e=>({}),Pe=e=>({});function Wn(e){let t,a,u,n,i,r,o,f,s;Dt(e[17]);const c=e[16].trigger,l=Yt(c,e,e[15],Pe),p=e[16].contents,y=Yt(p,e,e[15],Ne);return{c(){t=J("div"),a=J("div"),l&&l.c(),u=rt(),n=J("div"),i=J("div"),r=J("div"),y&&y.c(),R(a,"class","trigger"),R(r,"class","contents-inner svelte-e787i"),R(i,"class","wrapper svelte-e787i"),R(n,"class","contents-wrapper svelte-e787i"),Mt(n,"top",e[6]+"px"),Mt(n,"left",e[7]+"px"),H(n,"visible",e[8]),H(n,"shrink",e[9]),H(n,"is-fullscreen",e[5]),R(t,"class","sc-popover svelte-e787i")},m(m,h){Z(m,t,h),Y(t,a),l&&l.m(a,null),e[18](a),Y(t,u),Y(t,n),Y(n,i),Y(i,r),y&&y.m(r,null),e[19](i),e[20](n),e[21](t),o=!0,f||(s=[gt(Be,"resize",e[17]),gt(a,"click",e[12])],f=!0)},p(m,[h]){l&&l.p&&(!o||h&32768)&&Jt(l,c,m,m[15],o?h:-1,Jn,Pe),y&&y.p&&(!o||h&32768)&&Jt(y,p,m,m[15],o?h:-1,Yn,Ne),(!o||h&64)&&Mt(n,"top",m[6]+"px"),(!o||h&128)&&Mt(n,"left",m[7]+"px"),h&256&&H(n,"visible",m[8]),h&512&&H(n,"shrink",m[9]),h&32&&H(n,"is-fullscreen",m[5])},i(m){o||(X(l,m),X(y,m),o=!0)},o(m){tt(l,m),tt(y,m),o=!1},d(m){m&&z(t),l&&l.d(m),e[18](null),y&&y.d(m),e[19](null),e[20](null),e[21](null),f=!1,mt(s)}}}function Fn(e,t,a){let u,n,{$$slots:i={},$$scope:r}=t;const{isOpen:o,isClosing:f,config:s,resetView:c}=et(ct);F(e,o,w=>a(8,u=w)),F(e,f,w=>a(9,n=w));const l=Ot();let p,y,m,h,b,T=!1,v=0,d=0,{trigger:g}=t;function S(){f.set(!0),Un(h,"animationend",()=>{f.set(!1),o.set(!1),l("closed")})}function A(w){if(!u)return;let _=w.target;do{if(_===p)return;_=_.parentNode}while(_);S()}ge(()=>{if(s.closeOnFocusLoss&&document.addEventListener("click",A),!!g)return m.appendChild(g.parentNode.removeChild(g)),()=>{s.closeOnFocusLoss&&document.removeEventListener("click",A)}});const j=async w=>{o.set(!0),c(),await vn();const{top:_,left:x,fullscreen:$}=Hn(window,w,s);a(5,T=$),a(6,v=_),a(7,d=x),l("opened")};function C(){a(1,y=Be.innerWidth)}function E(w){_t[w?"unshift":"push"](()=>{m=w,a(2,m)})}function D(w){_t[w?"unshift":"push"](()=>{h=w,a(3,h)})}function B(w){_t[w?"unshift":"push"](()=>{b=w,a(4,b)})}function k(w){_t[w?"unshift":"push"](()=>{p=w,a(0,p)})}return e.$$set=w=>{"trigger"in w&&a(13,g=w.trigger),"$$scope"in w&&a(15,r=w.$$scope)},[p,y,m,h,b,T,v,d,u,n,o,f,j,g,S,r,i,C,E,D,B,k]}class Ln extends pt{constructor(t){super();dt(this,t,Fn,Wn,lt,{trigger:13,close:14})}get close(){return this.$$.ctx[14]}}class Vn{constructor(t={}){this.style="",this.buttonBackgroundColor="#fff",this.buttonBorderColor="#eee",this.buttonTextColor="#333",this.buttonWidth="300px",this.highlightColor="#f7901e",this.passiveHighlightColor="#FCD9B1",this.dayBackgroundColor="none",this.dayBackgroundColorIsNight="none",this.dayTextColor="#4a4a4a",this.dayTextColorIsNight="#4a4a4a",this.dayTextColorInRange="white",this.dayHighlightedBackgroundColor="#efefef",this.dayHighlightedTextColor="#4a4a4a",this.currentDayTextColor="#000",this.selectedDayTextColor="white",this.timeNightModeTextColor="white",this.timeNightModeBackgroundColor="#808080",this.timeDayModeTextColor="white",this.timeDayModeBackgroundColor="white",this.timeSelectedTextColor="#3d4548",this.timeInputTextColor="#3d4548",this.timeConfirmButtonColor="#2196F3",this.timeConfirmButtonTextColor="white",this.toolbarBorderColor="#888",this.contentBackground="white",this.monthYearTextColor="#3d4548",this.legendTextColor="#4a4a4a",this.datepickerWidth="auto",Object.entries(t).forEach(([a,u])=>{this[a]=u})}toWrapperStyle(){return`
      --button-background-color: ${this.buttonBackgroundColor};
      --button-border-color: ${this.buttonBorderColor};
      --button-text-color: ${this.buttonTextColor};
      --button-width: ${this.buttonWidth};
      --highlight-color: ${this.highlightColor};
      --passive-highlight-color: ${this.passiveHighlightColor};

      --day-background-color: ${this.dayBackgroundColor};
      --day-background-color-is-night: ${this.dayBackgroundColorIsNight};
      --day-text-color: ${this.dayTextColor};
      --day-text-color-in-range: ${this.dayTextColorInRange};
      --day-text-color-is-night: ${this.dayTextColorIsNight};
      --day-highlighted-background-color: ${this.dayHighlightedBackgroundColor};
      --day-highlighted-text-color: ${this.dayHighlightedTextColor};

      --current-day-text-color: ${this.currentDayTextColor};
      --selected-day-text-color: ${this.selectedDayTextColor};

      --time-night-mode-text-color: ${this.timeNightModeTextColor};
      --time-night-mode-background-color: ${this.timeNightModeBackgroundColor};
      --time-day-mode-text-color: ${this.timeDayModeTextColor};
      --time-day-mode-background-color: ${this.timeDayModeBackgroundColor};

      --time-selected-text-color: ${this.timeSelectedTextColor};
      --time-input-text-color: ${this.timeInputTextColor};
      --time-confirm-button-text-color: ${this.timeConfirmButtonTextColor};
      --time-confirm-button-color: ${this.timeConfirmButtonColor};

      --toolbar-border-color: ${this.toolbarBorderColor};

      --content-background: ${this.contentBackground};

      --month-year-text-color: ${this.monthYearTextColor};
      --legend-text-color: ${this.legendTextColor};
      --datepicker-width: ${this.datepickerWidth};

      ${this.style}
    `}}function Ie(e,t,a){const u=e.startOf("day").toDate(),n=t.startOf("day").toDate(),i=a.startOf("day").toDate();return i>u&&i<n}function zn(e,{delay:t=0,duration:a=400,easing:u=On,x:n=0,y:i=0,opacity:r=0}={}){const o=getComputedStyle(e),f=+o.opacity,s=o.transform==="none"?"":o.transform,c=f*(1-r);return{delay:t,duration:a,easing:u,css:(l,p)=>`
			transform: ${s} translate(${(1-l)*n}px, ${(1-l)*i}px);
			opacity: ${f-c*p}`}}function Ge(e,t,a){const u=e.slice();return u[16]=t[a],u}function Ke(e){let t,a,u=e[16].date.date()+"",n,i,r,o,f;function s(){return e[15](e[16])}return{c(){t=J("div"),a=J("button"),n=yt(u),r=rt(),R(a,"class","day--label svelte-fxm32m"),R(a,"type","button"),R(a,"aria-label",i=e[16].date.format("YYYY-MM-DD")),H(a,"highlighted",e[16].date.isSame(e[5],"day")),H(a,"shake-date",e[6]&&e[16].date.isSame(e[6],"day")),H(a,"disabled",!e[16].selectable),R(t,"class","day svelte-fxm32m"),H(t,"is-night",!e[2]),H(t,"is-range-picker",e[7].isRangePicker),H(t,"outside-month",!e[16].partOfMonth),H(t,"first-of-month",e[16].firstOfMonth),H(t,"last-of-month",e[16].lastOfMonth),H(t,"selection-start",e[16].date.isSame(e[3],"day")),H(t,"selection-end",e[7].isRangePicker&&e[16].date.isSame(e[4],"day")),H(t,"part-of-range",e[7].isRangePicker&&Ie(e[3],e[4],e[16].date)),H(t,"is-today",e[16].isToday),H(t,"is-disabled",!e[16].selectable)},m(c,l){Z(c,t,l),Y(t,a),Y(a,n),Y(t,r),o||(f=gt(a,"click",dn(s)),o=!0)},p(c,l){e=c,l&1&&u!==(u=e[16].date.date()+"")&&wt(n,u),l&1&&i!==(i=e[16].date.format("YYYY-MM-DD"))&&R(a,"aria-label",i),l&33&&H(a,"highlighted",e[16].date.isSame(e[5],"day")),l&65&&H(a,"shake-date",e[6]&&e[16].date.isSame(e[6],"day")),l&1&&H(a,"disabled",!e[16].selectable),l&4&&H(t,"is-night",!e[2]),l&1&&H(t,"outside-month",!e[16].partOfMonth),l&1&&H(t,"first-of-month",e[16].firstOfMonth),l&1&&H(t,"last-of-month",e[16].lastOfMonth),l&9&&H(t,"selection-start",e[16].date.isSame(e[3],"day")),l&145&&H(t,"selection-end",e[7].isRangePicker&&e[16].date.isSame(e[4],"day")),l&153&&H(t,"part-of-range",e[7].isRangePicker&&Ie(e[3],e[4],e[16].date)),l&1&&H(t,"is-today",e[16].isToday),l&1&&H(t,"is-disabled",!e[16].selectable)},d(c){c&&z(t),o=!1,f()}}}function qn(e){let t,a,u=e[0],n=[];for(let i=0;i<u.length;i+=1)n[i]=Ke(Ge(e,u,i));return{c(){t=J("div");for(let i=0;i<n.length;i+=1)n[i].c();R(t,"class","week svelte-fxm32m")},m(i,r){Z(i,t,r);for(let o=0;o<n.length;o+=1)n[o].m(t,null)},p(i,[r]){if(e=i,r&8445){u=e[0];let o;for(o=0;o<u.length;o+=1){const f=Ge(e,u,o);n[o]?n[o].p(f,r):(n[o]=Ke(f),n[o].c(),n[o].m(t,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=u.length}},i(i){i&&(a||Dt(()=>{a=kn(t,zn,{x:e[1]*50,duration:180,delay:90}),a.start()}))},o:Q,d(i){i&&z(t),Ft(n,i)}}}function Zn(e,t,a){let u,n,i,r,o,{viewContextKey:f}=t,{days:s}=t,{direction:c}=t;const{config:l,shouldShakeDate:p,highlighted:y,selectedStartDate:m,selectedEndDate:h}=et(ct);F(e,p,d=>a(6,o=d)),F(e,y,d=>a(5,r=d)),F(e,m,d=>a(3,n=d)),F(e,h,d=>a(4,i=d));const{isDaytime:b}=et(f);F(e,b,d=>a(2,u=d));const T=Ot(),v=d=>T("chosen",{date:d.date});return e.$$set=d=>{"viewContextKey"in d&&a(14,f=d.viewContextKey),"days"in d&&a(0,s=d.days),"direction"in d&&a(1,c=d.direction)},[s,c,u,n,i,r,o,l,p,y,m,h,b,T,f,v]}class Xn extends pt{constructor(t){super();dt(this,t,Zn,qn,lt,{viewContextKey:14,days:0,direction:1})}}function Re(e,t,a){const u=e.slice();return u[7]=t[a],u}function He(e,t,a){const u=e.slice();return u[10]=t[a],u}function Ue(e){let t,a=e[10]+"",u;return{c(){t=J("span"),u=yt(a),R(t,"class","svelte-f40bp3")},m(n,i){Z(n,t,i),Y(t,u)},p:Q,d(n){n&&z(t)}}}function Ye(e,t){let a,u,n;return u=new Xn({props:{viewContextKey:t[0],days:t[7].days,direction:t[1]}}),u.$on("chosen",t[6]),{key:e,first:null,c(){a=de(),at(u.$$.fragment),this.first=a},m(i,r){Z(i,a,r),it(u,i,r),n=!0},p(i,r){t=i;const o={};r&1&&(o.viewContextKey=t[0]),r&4&&(o.days=t[7].days),r&2&&(o.direction=t[1]),u.$set(o)},i(i){n||(X(u.$$.fragment,i),n=!0)},o(i){tt(u.$$.fragment,i),n=!1},d(i){i&&z(a),ot(u,i)}}}function Qn(e){let t,a,u,n,i,r=[],o=new Map,f,s=W.weekdaysShort(),c=[];for(let y=0;y<s.length;y+=1)c[y]=Ue(He(e,s,y));let l=e[2].visibleMonth.weeks;const p=y=>y[7].id;for(let y=0;y<l.length;y+=1){let m=Re(e,l,y),h=p(m);o.set(h,r[y]=Ye(h,m))}return{c(){t=J("div"),a=J("div"),u=J("div"),n=J("div");for(let y=0;y<c.length;y+=1)c[y].c();i=rt();for(let y=0;y<r.length;y+=1)r[y].c();R(n,"class","month-week svelte-f40bp3"),R(u,"class","legend svelte-f40bp3"),R(a,"class","month-dates svelte-f40bp3"),R(t,"class","month-container svelte-f40bp3")},m(y,m){Z(y,t,m),Y(t,a),Y(a,u),Y(u,n);for(let h=0;h<c.length;h+=1)c[h].m(n,null);Y(a,i);for(let h=0;h<r.length;h+=1)r[h].m(a,null);f=!0},p(y,[m]){if(m&0){s=W.weekdaysShort();let h;for(h=0;h<s.length;h+=1){const b=He(y,s,h);c[h]?c[h].p(b,m):(c[h]=Ue(b),c[h].c(),c[h].m(n,null))}for(;h<c.length;h+=1)c[h].d(1);c.length=s.length}m&7&&(l=y[2].visibleMonth.weeks,be(),r=xn(r,m,p,1,y,l,o,a,Dn,Ye,null,Re),ke())},i(y){if(!f){for(let m=0;m<l.length;m+=1)X(r[m]);f=!0}},o(y){for(let m=0;m<r.length;m+=1)tt(r[m]);f=!1},d(y){y&&z(t),Ft(c,y);for(let m=0;m<r.length;m+=1)r[m].d()}}}function tr(e,t,a){let u,{viewContextKey:n}=t,{id:i}=t;const{monthView:r}=et(n);F(e,r,c=>a(2,u=c));let o=i,f;function s(c){zt.call(this,e,c)}return e.$$set=c=>{"viewContextKey"in c&&a(0,n=c.viewContextKey),"id"in c&&a(4,i=c.id)},e.$$.update=()=>{e.$$.dirty&48&&(a(1,f=o<i?1:-1),a(5,o=i))},[n,f,u,r,i,o,s]}class er extends pt{constructor(t){super();dt(this,t,tr,Qn,lt,{viewContextKey:0,id:4})}}function Je(e,t,a){const u=e.slice();return u[27]=t[a],u[29]=a,u}function We(e){let t,a,u=e[27].abbrev+"",n,i,r,o,f;function s(...c){return e[21](e[27],e[29],...c)}return{c(){t=J("button"),a=J("span"),n=yt(u),i=rt(),R(a,"class","svelte-12vzc1r"),R(t,"class","month-selector--month svelte-12vzc1r"),t.disabled=r=!e[27].selectable,H(t,"selected",e[29]===e[0].month())},m(c,l){Z(c,t,l),Y(t,a),Y(a,n),Y(t,i),o||(f=gt(t,"click",s),o=!0)},p(c,l){e=c,l&4&&u!==(u=e[27].abbrev+"")&&wt(n,u),l&4&&r!==(r=!e[27].selectable)&&(t.disabled=r),l&1&&H(t,"selected",e[29]===e[0].month())},d(c){c&&z(t),o=!1,f()}}}function nr(e){let t,a,u,n,i,r,o,f,s=e[0].format("MMMM YYYY")+"",c,l,p,y,m,h,b,T,v,d=e[2],g=[];for(let S=0;S<d.length;S+=1)g[S]=We(Je(e,d,S));return{c(){t=J("div"),a=J("div"),u=J("button"),n=J("i"),r=rt(),o=J("button"),f=J("span"),c=yt(s),l=rt(),p=J("button"),y=J("i"),h=rt(),b=J("div");for(let S=0;S<g.length;S+=1)g[S].c();R(n,"class","arrow left svelte-12vzc1r"),R(u,"class","control svelte-12vzc1r"),R(u,"type","button"),R(u,"aria-label","Previous month"),u.disabled=i=!e[3],R(o,"type","button"),R(o,"class","label svelte-12vzc1r"),R(y,"class","arrow right svelte-12vzc1r"),R(p,"class","control svelte-12vzc1r"),R(p,"type","button"),R(p,"aria-label","Next month"),p.disabled=m=!e[4],R(a,"class","heading-section svelte-12vzc1r"),R(b,"class","month-selector svelte-12vzc1r"),H(b,"open",e[1]),R(t,"class","title svelte-12vzc1r")},m(S,A){Z(S,t,A),Y(t,a),Y(a,u),Y(u,n),Y(a,r),Y(a,o),Y(o,f),Y(f,c),Y(a,l),Y(a,p),Y(p,y),Y(t,h),Y(t,b);for(let j=0;j<g.length;j+=1)g[j].m(b,null);T||(v=[gt(u,"click",e[19]),gt(o,"click",e[10]),gt(p,"click",e[20])],T=!0)},p(S,[A]){if(A&8&&i!==(i=!S[3])&&(u.disabled=i),A&1&&s!==(s=S[0].format("MMMM YYYY")+"")&&wt(c,s),A&16&&m!==(m=!S[4])&&(p.disabled=m),A&2053){d=S[2];let j;for(j=0;j<d.length;j+=1){const C=Je(S,d,j);g[j]?g[j].p(C,A):(g[j]=We(C),g[j].c(),g[j].m(b,null))}for(;j<g.length;j+=1)g[j].d(1);g.length=d.length}A&2&&H(b,"open",S[1])},i:Q,o:Q,d(S){S&&z(t),Ft(g,S),T=!1,mt(v)}}}function rr(e,t,a){let u,n,i,r,o,f,s,c,l,{viewContextKey:p}=t;const{months:y,config:m,highlighted:h,leftCalendarDate:b,rightCalendarDate:T}=et(ct);F(e,b,_=>a(18,l=_)),F(e,T,_=>a(17,c=_));const{isStart:v,displayedDate:d,monthView:g}=et(p);F(e,d,_=>a(0,f=_)),F(e,g,_=>a(15,s=_));let S=!1,A;function j(_){d.update(x=>x.month(_)),h.set(f)}function C(_){_===1&&!r||_===-1&&!o||(d.update(x=>x.add(_,"months")),h.set(f))}function E(){a(1,S=!S)}function D(_,{monthDefinition:x,index:$}){_.stopPropagation(),!!x.selectable&&(j($),E())}const B=()=>C(-1),k=()=>C(1),w=(_,x,$)=>D($,{monthDefinition:_,index:x});return e.$$set=_=>{"viewContextKey"in _&&a(12,p=_.viewContextKey)},e.$$.update=()=>{if(e.$$.dirty&1){const _=m.start.isSame(f,"year"),x=m.end.isSame(f,"year");a(2,A=W.months().map(($,O)=>Object.assign({},{name:$,abbrev:W.monthsShort()[O]},{selectable:!_&&!x||(!_||O>=m.start.month())&&(!x||O<=m.end.year())})))}e.$$.dirty&1&&a(14,u=W(f).diff("0000-00-00","month")),e.$$.dirty&262144&&a(13,n=W(l).diff("0000-00-00","month")),e.$$.dirty&131072&&a(16,i=W(c).diff("0000-00-00","month")),e.$$.dirty&114688&&a(4,r=s.monthIndex<y.length-1&&(m.isRangePicker&&v?u<i-1:!0)),e.$$.dirty&57344&&a(3,o=s.monthIndex>0&&(m.isRangePicker&&!v?u>n+1:!0))},[f,S,A,o,r,b,T,d,g,C,E,D,p,n,u,s,i,c,l,B,k,w]}class ir extends pt{constructor(t){super();dt(this,t,rr,nr,lt,{viewContextKey:12})}}let Fe;function or(e,t,a,u){const n=e.find(i=>i.month===t&&i.year===u);if(!n)return null;for(let i=0;i<n.weeks.length;i+=1)for(let r=0;r<n.weeks[i].days.length;r+=1){const o=n.weeks[i].days[r];if(o.month===t&&o.day===a&&o.year===u)return o}return null}function ar(e,t){const a=or(e,t.month(),t.date(),t.year());return a&&a.selectable}function ur(e,t){clearTimeout(Fe),e.set(t),Fe=setTimeout(()=>{e.set(!1)},700)}function sr(e){let t,a,u,n,i;return a=new ir({props:{viewContextKey:e[0]}}),n=new er({props:{viewContextKey:e[0],id:e[1]}}),n.$on("chosen",e[5]),{c(){t=J("div"),at(a.$$.fragment),u=rt(),at(n.$$.fragment),R(t,"class","svelte-1huv59b")},m(r,o){Z(r,t,o),it(a,t,null),Y(t,u),it(n,t,null),i=!0},p(r,[o]){const f={};o&1&&(f.viewContextKey=r[0]),a.$set(f);const s={};o&1&&(s.viewContextKey=r[0]),o&2&&(s.id=r[1]),n.$set(s)},i(r){i||(X(a.$$.fragment,r),X(n.$$.fragment,r),i=!0)},o(r){tt(a.$$.fragment,r),tt(n.$$.fragment,r),i=!1},d(r){r&&z(t),ot(a),ot(n)}}}function fr(e,t,a){let u,n,{viewContextKey:i}=t;const r=Ot(),{displayedDate:o}=et(i);F(e,o,p=>a(4,n=p));const{months:f,shouldShakeDate:s}=et(ct);function c(p){return ar(f,p)?(r("chosen",{date:p}),!0):ur(s,p)}const l=p=>c(p.detail.date);return e.$$set=p=>{"viewContextKey"in p&&a(0,i=p.viewContextKey)},e.$$.update=()=>{e.$$.dirty&16&&a(1,u=n.unix())},[i,u,o,c,n,l]}class ne extends pt{constructor(t){super();dt(this,t,fr,sr,lt,{viewContextKey:0})}}function lr(e,t){return te([t],([a])=>{let u=0;const n=a.month(),i=a.year();for(let r=0;r<e.length;r+=1)e[r].month===n&&e[r].year===i&&(u=r);return{monthIndex:u,visibleMonth:e[u]}})}function Le(e,t){const{config:a,months:u,leftCalendarDate:n,rightCalendarDate:i,selectedStartDate:r,selectedEndDate:o}=t,[f,s]=e?[r,n]:[o,i],c=te(f,l=>{if(!l)return!0;const[p]=W(l).format("HH:mm").split(":").map(y=>parseInt(y));return p>a.morning&&p<a.night});return{isStart:e,date:f,view:ne,isDaytime:c,displayedDate:s,monthView:lr(u,s)}}function cr(e){let t,a,u,n,i;return{c(){t=J("div"),a=J("button"),u=yt(e[0]),R(a,"type","button"),R(a,"class","button svelte-1sdetts"),R(t,"class","toolbar svelte-1sdetts")},m(r,o){Z(r,t,o),Y(t,a),Y(a,u),n||(i=gt(a,"click",hn(e[2])),n=!0)},p(r,[o]){o&1&&wt(u,r[0])},i:Q,o:Q,d(r){r&&z(t),n=!1,i()}}}function hr(e,t,a){let u,{continueText:n}=t;const i=Ot(),{config:r,component:o,isDateChosen:f}=et(ct);F(e,o,l=>a(3,u=l));function s(){f.set(!0),i("close")}function c(){f.set(!1),u==="date-view"?r.isTimePicker?o.set("time-view"):s():u==="time-view"&&s()}return e.$$set=l=>{"continueText"in l&&a(0,n=l.continueText)},[n,o,c]}class dr extends pt{constructor(t){super();dt(this,t,hr,cr,lt,{continueText:0})}}function pr(e){let t,a,u;return{c(){t=J("span"),R(t,"class","chevron svelte-90t22l"),H(t,"bottom",!e[0])},m(n,i){Z(n,t,i),a||(u=gt(t,"click",e[1]),a=!0)},p(n,[i]){i&1&&H(t,"bottom",!n[0])},i:Q,o:Q,d(n){n&&z(t),a=!1,u()}}}function yr(e,t,a){let{up:u=!0}=t;function n(i){zt.call(this,e,i)}return e.$$set=i=>{"up"in i&&a(0,u=i.up)},[u,n]}class Rt extends pt{constructor(t){super();dt(this,t,yr,pr,lt,{up:0})}}function gr(e,t){e.addEventListener("keydown",f),e.addEventListener("focus",i),e.addEventListener("blur",o);let a;const u=t.subscribe(p=>{a=p.split(""),n()});function n(){e.value=a.join("")}function i(){a=[],n()}function r(){t.set(a.join("")),n()}function o(){if(a.digits===5){r();return}a=on(t).split(""),n()}function f(p){p.preventDefault();const y=p.which;y>=48&&y<=57&&l(y),y===8&&s()}function s(){a.pop(),a.length===3&&a.pop(),n()}function c(p){const y=a.length>4,m=a.length===0&&![0,1,2].includes(p),h=a.length===1&&a[0]===2&&p>3,b=a.length===3&&p>5;return y||m||h||b}function l(p){const y=p-48;c(y)||(a.length===2&&a.push(":"),a.push(y),a.length===5&&r(),n())}return{destroy(){u(),e.removeEventListener("keydown",f),e.removeEventListener("focus",i),e.removeEventListener("blur",o)}}}function Ve(e,t){return[String(e).padStart(2,"0"),String(t).padStart(2,"0")].join(":")}function mr(e,t){const a=ut(W(e).format("HH:mm"));function u(r){a.update(o=>{let[f,s]=o.split(":");return r==="hour"&&f<23&&++f,r==="minute"&&s<59&&(s=Math.min(59,parseInt(s)+t.minuteStep)),Ve(f,s)})}function n(r){a.update(o=>{let[f,s]=o.split(":");return r==="hour"&&f>0&&--f,r==="minute"&&s>0&&(s=Math.max(0,parseInt(s)-t.minuteStep)),Ve(f,s)})}function i(r){a.set(r)}return{increment:u,decrement:n,time:a,set:i}}function vr(e){let t,a,u,n,i,r,o,f,s,c,l,p,y,m,h;return u=new Rt({props:{up:!0}}),u.$on("click",e[7]),i=new Rt({props:{up:!0}}),i.$on("click",e[8]),c=new Rt({props:{up:!1}}),c.$on("click",e[9]),p=new Rt({props:{up:!1}}),p.$on("click",e[10]),{c(){t=J("div"),a=J("div"),at(u.$$.fragment),n=rt(),at(i.$$.fragment),r=rt(),o=J("input"),f=rt(),s=J("div"),at(c.$$.fragment),l=rt(),at(p.$$.fragment),R(a,"class","controls svelte-yr6m"),R(o,"type","text"),R(o,"class","svelte-yr6m"),R(s,"class","controls svelte-yr6m"),R(t,"class","time-picker svelte-yr6m"),H(t,"is-night",!e[0])},m(b,T){Z(b,t,T),Y(t,a),it(u,a,null),Y(a,n),it(i,a,null),Y(t,r),Y(t,o),Y(t,f),Y(t,s),it(c,s,null),Y(s,l),it(p,s,null),y=!0,m||(h=un(gr.call(null,o,e[5])),m=!0)},p(b,[T]){T&1&&H(t,"is-night",!b[0])},i(b){y||(X(u.$$.fragment,b),X(i.$$.fragment,b),X(c.$$.fragment,b),X(p.$$.fragment,b),y=!0)},o(b){tt(u.$$.fragment,b),tt(i.$$.fragment,b),tt(c.$$.fragment,b),tt(p.$$.fragment,b),y=!1},d(b){b&&z(t),ot(u),ot(i),ot(c),ot(p),m=!1,h()}}}function wr(e,t,a){let u,n,{viewContextKey:i}=t;const{config:r}=et(ct),{date:o,isDaytime:f}=et(i);F(e,o,b=>a(11,u=b)),F(e,f,b=>a(0,n=b));const{increment:s,decrement:c,time:l}=mr(u,r);ge(()=>l.subscribe(b=>{const[T,v]=b.split(":").map(d=>parseInt(d));o.update(d=>d.hour(T).minute(v))}));const p=()=>s("hour"),y=()=>s("minute"),m=()=>c("hour"),h=()=>c("minute");return e.$$set=b=>{"viewContextKey"in b&&a(6,i=b.viewContextKey)},[n,o,f,s,c,l,i,p,y,m,h]}class _r extends pt{constructor(t){super();dt(this,t,wr,vr,lt,{viewContextKey:6})}}function br(e){let t,a,u=W(e[2]).format(e[5].format)+"",n,i,r,o;return r=new _r({props:{viewContextKey:e[0]}}),{c(){t=J("div"),a=J("span"),n=yt(u),i=rt(),at(r.$$.fragment),R(a,"class","chosen-date svelte-18fvvby"),R(t,"class","time-container svelte-18fvvby"),H(t,"is-night",!e[1])},m(f,s){Z(f,t,s),Y(t,a),Y(a,n),Y(t,i),it(r,t,null),o=!0},p(f,[s]){(!o||s&4)&&u!==(u=W(f[2]).format(f[5].format)+"")&&wt(n,u);const c={};s&1&&(c.viewContextKey=f[0]),r.$set(c),s&2&&H(t,"is-night",!f[1])},i(f){o||(X(r.$$.fragment,f),o=!0)},o(f){tt(r.$$.fragment,f),o=!1},d(f){f&&z(t),ot(r)}}}function kr(e,t,a){let u,n,{viewContextKey:i}=t;const{date:r,isDaytime:o}=et(i);F(e,r,s=>a(2,n=s)),F(e,o,s=>a(1,u=s));const{config:f}=et(ct);return e.$$set=s=>{"viewContextKey"in s&&a(0,i=s.viewContextKey)},[i,u,n,r,o,f]}class ze extends pt{constructor(t){super();dt(this,t,kr,br,lt,{viewContextKey:0})}}function Sr(e){let t,a,u;var n=e[2]==="date-view"?ne:ze;function i(r){return{props:{viewContextKey:r[0]}}}return n&&(a=new n(i(e)),a.$on("chosen",e[6])),{c(){t=J("div"),a&&at(a.$$.fragment),R(t,"class","calendar svelte-1e34sxp"),H(t,"is-range-picker",e[3].isRangePicker),H(t,"day",e[1]),H(t,"night",!e[1])},m(r,o){Z(r,t,o),a&&it(a,t,null),u=!0},p(r,[o]){const f={};if(o&1&&(f.viewContextKey=r[0]),n!==(n=r[2]==="date-view"?ne:ze)){if(a){be();const s=a;tt(s.$$.fragment,1,0,()=>{ot(s,1)}),ke()}n?(a=new n(i(r)),a.$on("chosen",r[6]),at(a.$$.fragment),X(a.$$.fragment,1),it(a,t,null)):a=null}else n&&a.$set(f);o&2&&H(t,"day",r[1]),o&2&&H(t,"night",!r[1])},i(r){u||(a&&X(a.$$.fragment,r),u=!0)},o(r){a&&tt(a.$$.fragment,r),u=!1},d(r){r&&z(t),a&&ot(a)}}}function Dr(e,t,a){let u,n,{viewContextKey:i}=t;const{config:r,component:o}=et(ct);F(e,o,c=>a(2,n=c));const{isDaytime:f}=et(i);F(e,f,c=>a(1,u=c));function s(c){zt.call(this,e,c)}return e.$$set=c=>{"viewContextKey"in c&&a(0,i=c.viewContextKey)},[i,u,n,r,o,f,s]}class qe extends pt{constructor(t){super();dt(this,t,Dr,Sr,lt,{viewContextKey:0})}}const xr=e=>({formatted:e[0]&256}),Ze=e=>({formatted:e[8]});function Xe(e){let t;function a(i,r){return i[4]?Ar:Tr}let u=a(e),n=u(e);return{c(){t=J("button"),n.c(),R(t,"class","calendar-button svelte-fik4fg"),R(t,"type","button")},m(i,r){Z(i,t,r),n.m(t,null)},p(i,r){u===(u=a(i))&&n?n.p(i,r):(n.d(1),n=u(i),n&&(n.c(),n.m(t,null)))},d(i){i&&z(t),n.d()}}}function Tr(e){let t;return{c(){t=yt(e[0])},m(a,u){Z(a,t,u)},p(a,u){u[0]&1&&wt(t,a[0])},d(a){a&&z(t)}}}function Ar(e){let t=e[8].formattedCombined+"",a;return{c(){a=yt(t)},m(u,n){Z(u,a,n)},p(u,n){n[0]&256&&t!==(t=u[8].formattedCombined+"")&&wt(a,t)},d(u){u&&z(a)}}}function Or(e){let t,a=!e[1]&&Xe(e);return{c(){a&&a.c(),t=de()},m(u,n){a&&a.m(u,n),Z(u,t,n)},p(u,n){u[1]?a&&(a.d(1),a=null):a?a.p(u,n):(a=Xe(u),a.c(),a.m(t.parentNode,t))},d(u){a&&a.d(u),u&&z(t)}}}function jr(e){let t,a;const u=e[34].default,n=Yt(u,e,e[37],Ze),i=n||Or(e);return{c(){t=J("div"),i&&i.c(),R(t,"slot","trigger"),R(t,"class","svelte-fik4fg")},m(r,o){Z(r,t,o),i&&i.m(t,null),a=!0},p(r,o){n?n.p&&(!a||o[0]&256|o[1]&64)&&Jt(n,u,r,r[37],a?o:[-1,-1],xr,Ze):i&&i.p&&(!a||o[0]&275)&&i.p(r,a?o:[-1,-1])},i(r){a||(X(i,r),a=!0)},o(r){tt(i,r),a=!1},d(r){r&&z(t),i&&i.d(r)}}}function Cr(e){let t,a;return t=new qe({props:{viewContextKey:e[11]}}),t.$on("chosen",e[21]),{c(){at(t.$$.fragment)},m(u,n){it(t,u,n),a=!0},p:Q,i(u){a||(X(t.$$.fragment,u),a=!0)},o(u){tt(t.$$.fragment,u),a=!1},d(u){ot(t,u)}}}function Er(e){let t,a,u,n,i,r,o;u=new qe({props:{viewContextKey:e[10]}}),u.$on("chosen",e[21]);let f=e[12].isRangePicker&&Cr(e);return r=new dr({props:{continueText:e[3]}}),r.$on("close",e[22]),{c(){t=J("div"),a=J("div"),at(u.$$.fragment),n=rt(),f&&f.c(),i=rt(),at(r.$$.fragment),R(a,"class","view svelte-fik4fg"),R(t,"class","contents svelte-fik4fg"),R(t,"slot","contents"),H(t,"is-range-picker",e[12].isRangePicker)},m(s,c){Z(s,t,c),Y(t,a),it(u,a,null),Y(a,n),f&&f.m(a,null),Y(t,i),it(r,t,null),o=!0},p(s,c){s[12].isRangePicker&&f.p(s,c);const l={};c[0]&8&&(l.continueText=s[3]),r.$set(l)},i(s){o||(X(u.$$.fragment,s),X(f),X(r.$$.fragment,s),o=!0)},o(s){tt(u.$$.fragment,s),tt(f),tt(r.$$.fragment,s),o=!1},d(s){s&&z(t),ot(u),f&&f.d(),ot(r)}}}function $r(e){let t,a,u,n,i={trigger:e[1],$$slots:{contents:[Er],trigger:[jr]},$$scope:{ctx:e}};return a=new Ln({props:i}),e[35](a),a.$on("opened",e[20]),a.$on("closed",e[36]),{c(){t=J("div"),at(a.$$.fragment),R(t,"class","datepicker svelte-fik4fg"),R(t,"style",u=e[2].toWrapperStyle()),H(t,"open",e[6]),H(t,"closing",e[7])},m(r,o){Z(r,t,o),it(a,t,null),n=!0},p(r,o){const f={};o[0]&2&&(f.trigger=r[1]),o[0]&283|o[1]&64&&(f.$$scope={dirty:o,ctx:r}),a.$set(f),(!n||o[0]&4&&u!==(u=r[2].toWrapperStyle()))&&R(t,"style",u),o[0]&64&&H(t,"open",r[6]),o[0]&128&&H(t,"closing",r[7])},i(r){n||(X(a.$$.fragment,r),n=!0)},o(r){tt(a.$$.fragment,r),n=!1},d(r){r&&z(t),e[35](null),ot(a)}}}function Mr(e,t,a){let u,n,i,r,o,f,s,{$$slots:c={},$$scope:l}=t,{range:p=!1}=t,{placeholder:y="Choose Date"}=t,{format:m="DD / MM / YYYY"}=t,{start:h=W().subtract(1,"year")}=t,{end:b=W().add(1,"year")}=t,{trigger:T=null}=t,{selectableCallback:v=null}=t,{styling:d=new Vn}=t,{selected:g}=t,{closeOnFocusLoss:S=!0}=t,{time:A=!1}=t,{morning:j=7}=t,{night:C=19}=t,{minuteStep:E=5}=t,{continueText:D="Continue"}=t;const B=Ot(),k={},w={},_={start:W(h),end:W(b),isRangePicker:p,isTimePicker:A,closeOnFocusLoss:S,format:m,morning:j,night:C,selectableCallback:v,minuteStep:parseInt(E)};Vt(ct,Kn(g,_));const{selectedStartDate:x,selectedEndDate:$,isOpen:O,isClosing:M,highlighted:N,formatter:P,isDateChosen:I,isSelectingFirstDate:K}=et(ct);F(e,x,G=>a(40,r=G)),F(e,$,G=>a(39,i=G)),F(e,O,G=>a(6,o=G)),F(e,M,G=>a(7,f=G)),F(e,P,G=>a(8,s=G)),F(e,I,G=>a(4,u=G)),F(e,K,G=>a(38,n=G)),Vt(k,Le(!0,et(ct))),_.isRangePicker&&Vt(w,Le(!1,et(ct)));let U;function V(){N.set(r),B("open")}function L(){a(23,g=[r,i]),B("range-selected",{from:r.toDate(),to:i.toDate()})}function ft(){a(23,g=r.toDate()),B("date-selected",{date:r.toDate()})}function ht(){if(!_.isRangePicker)return;const G=r,At=i;At.isBefore(G)&&(x.set(At),$.set(G))}function nt(G){const{date:At}=G.detail;n?x.set(At):$.set(At),ht(),_.isRangePicker&&K.update(Qe=>!Qe)}function q(){ht(),U.close()}function st(G){_t[G?"unshift":"push"](()=>{U=G,a(5,U)})}const Tt=()=>B("close");return e.$$set=G=>{"range"in G&&a(24,p=G.range),"placeholder"in G&&a(0,y=G.placeholder),"format"in G&&a(25,m=G.format),"start"in G&&a(26,h=G.start),"end"in G&&a(27,b=G.end),"trigger"in G&&a(1,T=G.trigger),"selectableCallback"in G&&a(28,v=G.selectableCallback),"styling"in G&&a(2,d=G.styling),"selected"in G&&a(23,g=G.selected),"closeOnFocusLoss"in G&&a(29,S=G.closeOnFocusLoss),"time"in G&&a(30,A=G.time),"morning"in G&&a(31,j=G.morning),"night"in G&&a(32,C=G.night),"minuteStep"in G&&a(33,E=G.minuteStep),"continueText"in G&&a(3,D=G.continueText),"$$scope"in G&&a(37,l=G.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&16&&u&&(_.isRangePicker?L():ft(),B("change"))},[y,T,d,D,u,U,o,f,s,B,k,w,_,x,$,O,M,P,I,K,V,nt,q,g,p,m,h,b,v,S,A,j,C,E,c,st,Tt,l]}class Jr extends pt{constructor(t){super();dt(this,t,Mr,$r,lt,{range:24,placeholder:0,format:25,start:26,end:27,trigger:1,selectableCallback:28,styling:2,selected:23,closeOnFocusLoss:29,time:30,morning:31,night:32,minuteStep:33,continueText:3},[-1,-1])}}export{Gr as A,de as B,X as C,be as D,tt as E,ke as F,Ft as G,at as H,it as I,hn as J,ot as K,Pr as L,Rr as M,Kr as N,W as O,Jr as P,pt as S,rt as a,R as b,Z as c,Y as d,J as e,z as f,Ir as g,Mt as h,dt as i,Ot as j,Ht as k,gt as l,Nr as m,Q as n,ge as o,Ur as p,Hr as q,_t as r,lt as s,H as t,mt as u,Yr as v,ut as w,F as x,yt as y,wt as z};
